<!DOCTYPE html>

<html>

<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta name="keywords" content="SEP, UNAM, APRENDEMX, IMATE, LITE, Laboratorio LITE, norte, sur, este, oeste, puntos cardinales, recorrido, distancia, longitud, trayectoria, calles, instrucciones, girar, avanzar">

<head>
	<title>Rutas y distancias</title>
	<link rel="stylesheet" href="../fonts/style.css" type="text/css">
	<link rel="stylesheet" href="css/btn_style.css" type="text/css">
	<script type='text/javascript' src='../lib/descartes-min.js'></script>
</head>

<body style="margin:0px; padding:0px">

<ajs name="Descartes" width=1024 height=568 code="Descartes">
   <param name="tamaño" value="1024x568">
   <param name="image_loader" value="images/transp_1x1.png">
   <param name="expand" value="">
   <param name="editable" value="no">
   <param name="decimal_symbol" value=".">
   <param name="antialias" value="sí">
   <param name="deshacer" value="no">
   <param name="nombre" value="Descartes">
   <param name="Versión" value="5.340, 2015-05-21">
   <param name="Idioma" value="español">
   <param name="Botones" value="créditos=no config=no inicio=no limpiar=no ancho_este=150 ancho_oeste=150 alto=40">
   <param name="E_01" value="tipo='R2' id='E2' fijo='sí' escala='1' despl_imagen='arr-izq' fondo='ecf0f1' red='no' red10='no' ejes='no' texto='no'">
   <param name="E_02" value="tipo='R2' id='MAPA' x='bMapa.x' y='bMapa.y' ancho='560' alto='423' fijo='sí' escala='70' O.x='-315' O.y='245' despl_imagen='arr-izq' fondo='e9e5dc' red='no' red10='no' ejes='no' texto='no'">
   <param name="E_03" value="tipo='R2' id='RUTA' x='bMapa.x' y='bMapa.y' ancho='560' alto='423' dibujar-si='!bienRuta' fijo='sí' escala='70' O.x='-315' O.y='245' despl_imagen='arr-izq' fondo='ff000000' red='no' red10='no' ejes='no' texto='no'">
   <param name="E_04" value="tipo='R2' id='INST' x='bInst.x' y='bInst.y' ancho='404' alto='423' escala='1' O.x='-50%' O.y='-50%' despl_imagen='arr-izq' fondo='blanco' red='no' red10='no' ejes='no' texto='no'">
   <param name="E_05" value="tipo='R2' id='RETRO' dibujar-si='verificadoRuta' fijo='sí' escala='1' despl_imagen='arr-izq' fondo='7f34495e' red='no' red10='no' ejes='no' texto='no'">
   <param name="C_01" value="id='animar' tipo='numérico' interfaz='botón' región='interior' espacio='E2' nombre='          Animar' expresión='(bInst.x,E2._h-66,INST._w/2-10,46)' fijo='sí' visible='sí' color='blanco' color-int='9b59b6' negrita='sí' fuente puntos='24' imagen='_STYLE_|class=btnAprendeMx lavanda play|shadowTextColor=rgba(0,0,0,0.2)|shadowTextOffsetY=2|shadowTextBlur=0|textBorder=0' acción='calcular' parámetro='anim=1\ninstSel=-1\ncualIcono=-1\ndoPlay(0)' dibujar-si='0&&(!anim)' activo-si='(numInst>0)'">
   <param name="C_02" value="id='detener' tipo='numérico' interfaz='botón' región='interior' espacio='E2' nombre='          Detener' expresión='(bInst.x,E2._h-66,INST._w/2-10,46)' fijo='sí' visible='sí' color='blanco' color-int='e74c3c' negrita='sí' fuente puntos='24' imagen='_STYLE_|class=btnAprendeMx bermellon stop|shadowTextColor=rgba(0,0,0,0.2)|shadowTextOffsetY=2|shadowTextBlur=0|textBorder=0' acción='calcular' parámetro='anim=0\ninstSel=-1\ndoPlay(0)' dibujar-si='0&&(anim)' pos_mensajes='centro'">
   <param name="C_03" value="id='otroMapa' tipo='numérico' interfaz='botón' región='interior' espacio='E2' nombre='          Otro mapa' expresión='(bInst.x+INST._w/2+10,E2._h-66,INST._w/2-10,46)' fijo='sí' visible='sí' color='blanco' color-int='9b59b6' negrita='sí' fuente puntos='24' imagen='_STYLE_|class=btnAprendeMx lavanda mapa|shadowTextColor=rgba(0,0,0,0.2)|shadowTextOffsetY=2|shadowTextBlur=0|textBorder=0' acción='calcular' parámetro='otroEjercicio()\ndoPlay(0)' pos_mensajes='centro'">
   <param name="C_04" value="id='verificar' tipo='numérico' interfaz='botón' región='interior' espacio='E2' nombre='          Verificar' expresión='(bInst.x,E2._h-66,INST._w/2-10,46)' fijo='sí' visible='sí' color='blanco' color-int='9b59b6' negrita='sí' fuente puntos='24' imagen='_STYLE_|class=btnAprendeMx lavanda checar|shadowTextColor=rgba(0,0,0,0.2)|shadowTextOffsetY=2|shadowTextBlur=0|textBorder=0' acción='calcular' parámetro='verificar()\nanim=bienRuta\ndoPlay(0)' activo-si='(numRutaPts>1)&&(!bienRuta)' pos_mensajes='centro'">
   <param name="C_05" value="id='rosaVientos' tipo='numérico' interfaz='botón' región='interior' espacio='E2' nombre='          Puntos cardinales' expresión='(bExtra.x,E2._h-66,270,46)' fijo='sí' visible='sí' color='blanco' color-int='9b59b6' negrita='sí' fuente puntos='24' imagen='_STYLE_|class=btnAprendeMx lavanda rosa_vientos|shadowTextColor=rgba(0,0,0,0.2)|shadowTextOffsetY=2|shadowTextBlur=0|textBorder=0' acción='calcular' parámetro='muestraRosa=1-muestraRosa\ncualIcono=-1\ndoPlay(0)' pos_mensajes='centro'">
   <param name="C_06" value="id='dibujar' tipo='numérico' interfaz='botón' región='interior' espacio='E2' nombre='          Incia dibujo' expresión='(bExtra.x+290,E2._h-66,270,46)' fijo='sí' visible='sí' color='blanco' color-int='9b59b6' negrita='sí' fuente puntos='24' imagen='_STYLE_|class=btnAprendeMx lavanda dibujar|shadowTextColor=rgba(0,0,0,0.2)|shadowTextOffsetY=2|shadowTextBlur=0|textBorder=0' acción='calcular' parámetro='drawing=1\ndoPlay(0)' dibujar-si='!drawing' pos_mensajes='centro'">
   <param name="C_07" value="id='borrar' tipo='numérico' interfaz='botón' región='interior' espacio='E2' nombre='          Borrar dibujo' expresión='(bExtra.x+290,E2._h-66,270,46)' fijo='sí' visible='sí' color='blanco' color-int='9b59b6' negrita='sí' fuente puntos='24' imagen='_STYLE_|class=btnAprendeMx lavanda limpiar|shadowTextColor=rgba(0,0,0,0.2)|shadowTextOffsetY=2|shadowTextBlur=0|textBorder=0' acción='calcular' parámetro='iniciaRuta()\ndrawingEnd=0\ndoPlay(0)' dibujar-si='(!bienRuta)' activo-si='(numRutaPts>0)&&(!bienRuta)' pos_mensajes='centro'">
   <param name="C_08" value="id='cerrar' tipo='numérico' interfaz='botón' región='interior' espacio='RETRO' expresión='(bRetro.x+bRetro.w-50,bRetro.y+4,46,46)' fijo='sí' visible='sí' color='blanco' color-int='e74c3c' negrita='sí' fuente puntos='24' imagen='images/btn_close.png' acción='calcular' parámetro='hideShadeCover()\nverificadoRuta=0\ndoPlay(0)' pos_mensajes='centro'">
   <param name="C_09" value="id='escMapa' tipo='numérico' interfaz='botón' región='interior' espacio='E2' expresión='(bExtra.x+300,E2._h-76,260,66)' fijo='sí' visible='sí' color='blanco' color-int='9b59b6' negrita='sí' fuente puntos='24' imagen='vacio.gif' acción='calcular' parámetro='muestraEscalaMapa=1-muestraEscalaMapa\ncualIcono=-1\ndoPlay(0)' dibujar-si='(bienRuta)' pos_mensajes='centro'">
   <param name="A_01" value="id='tryPlay(k)' algoritmo='sí' expresión='0' algoritmo='sí' hacer='parent.exec(&squot;tryPlay&squot;,&squot;EXP&squot;)'">
   <param name="A_02" value="id='doPlay(k)' algoritmo='sí' algoritmo='sí' hacer='parent.exec(&squot;doPlay&squot;,k);parent.update()'">
   <param name="A_03" value="id='_SEPARADOR_' expresión='0'">
   <param name="A_04" value="id='Inicio()' algoritmo='sí' expresión='0' algoritmo='sí' inicio='scroll_image_h=60' hacer='callesSegW=MAPA.escala/4;otroEjercicio();;posInst.x=6;posInst.y=6;posInst.w=INST._w-14;posInst.h=46;;bMapa.x=20;bMapa.y=56;bMapa.w=MAPA._w;bMapa.h=MAPA._h;bInst.x=600;bInst.y=bMapa.y;bInst.w=INST._w;bInst.h=INST._h;bInst.h_2=-INST._h/2;;bExtra.x=bMapa.x;bExtra.y=bMapa.y+bMapa.h;bExtra.w=bMapa.w;bExtra.h=70;;margenEscalaX=45;margenEscalaY=34;anchoEscala=200+margenEscalaX;altoEscala=10;;bRetro.w=450;bRetro.h=210;bRetro.x=(RETRO._w-bRetro.w)/2;bRetro.y=(RETRO._h-bRetro.h)/2;'">
   <param name="A_05" value="id='Calculos()' algoritmo='sí' expresión='0' algoritmo='sí' Local='cond' inicio='showScroll=((numInst-9)>0)' hacer='capInst=(showScroll)?numInst-9:0;scroll.y=ent(max(min(0,scroll.y),-capInst));;showScroll=0;;INST.Oy=(anim)?(-INST._h/2+(scroll.y)*posInst.h):INST.Oy;INST.Oy=min(bInst.h_2, INST.Oy);INST.Oy=max(bInst.h_2-posInst.h*capInst, INST.Oy);INST.Ox=-202'">
   <param name="A_06" value="id='_SEPARADOR_' expresión='0'">
   <param name="A_07" value="id='NomCalles' vector='sí' evaluar='una-sola-vez' tamaño='50' expresión='&squot;Madero&squot;;&squot;Hidalgo&squot;;&squot;Costa&squot;;&squot;León&squot;;&squot;García&squot;;&squot;López&squot;;&squot;Juárez&squot;;&squot;Serdán&squot;;&squot;Zapata&squot;;&squot;Villa&squot;;&squot;Mina&squot;;&squot;Galeana&squot;;&squot;María&squot;;&squot;Jara&squot;;&squot;Victoria&squot;;&squot;Allende&squot;;&squot;Zaragoza&squot;;&squot;Rayón&squot;;&squot;Morelos&squot;;&squot;Pino&squot;;&squot;Sierra&squot;;&squot;Vicario&squot;;&squot;Cárdenas&squot;;&squot;Cabrera&squot;;&squot;Montaño&squot;;&squot;Moreno&squot;;&squot;Carranza&squot;;&squot;Guerrero&squot;;&squot;Escutia&squot;;&squot;Bolívar&squot;;&squot;Iturbide&squot;;&squot;Obregón&squot;;&squot;Herrera&squot;;&squot;Negrete&squot;;&squot;Flores&squot;;&squot;González&squot;;&squot;Anaya&squot;;&squot;Zavala&squot;;&squot;Jerónimo&squot;;&squot;Peralta&squot;;&squot;Moya&squot;;&squot;Colón&squot;;&squot;Terán&squot;;&squot;Alcázar&squot;;&squot;Balbuena&squot;;&squot;Arriaga&squot;;&squot;Alvarado&squot;;&squot;Orozco&squot;;&squot;Bernal&squot;;&squot;Rendón&squot;'">
   <param name="A_08" value="id='ImgCalles' vector='sí' evaluar='una-sola-vez' tamaño='50' expresión='&squot;images/nombre_calles/madero.png&squot;;&squot;images/nombre_calles/hidalgo.png&squot;;&squot;images/nombre_calles/costa.png&squot;;&squot;images/nombre_calles/leon.png&squot;;&squot;images/nombre_calles/garcia.png&squot;;&squot;images/nombre_calles/lopez.png&squot;;&squot;images/nombre_calles/juarez.png&squot;;&squot;images/nombre_calles/serdan.png&squot;;&squot;images/nombre_calles/zapata.png&squot;;&squot;images/nombre_calles/villa.png&squot;;&squot;images/nombre_calles/mina.png&squot;;&squot;images/nombre_calles/galeana.png&squot;;&squot;images/nombre_calles/maria.png&squot;;&squot;images/nombre_calles/jara.png&squot;;&squot;images/nombre_calles/victoria.png&squot;;&squot;images/nombre_calles/allende.png&squot;;&squot;images/nombre_calles/zaragoza.png&squot;;&squot;images/nombre_calles/rayon.png&squot;;&squot;images/nombre_calles/morelos.png&squot;;&squot;images/nombre_calles/pino.png&squot;;&squot;images/nombre_calles/sierra.png&squot;;&squot;images/nombre_calles/vicario.png&squot;;&squot;images/nombre_calles/cardenas.png&squot;;&squot;images/nombre_calles/cabrera.png&squot;;&squot;images/nombre_calles/montanyo.png&squot;;&squot;images/nombre_calles/moreno.png&squot;;&squot;images/nombre_calles/carranza.png&squot;;&squot;images/nombre_calles/guerrero.png&squot;;&squot;images/nombre_calles/escutia.png&squot;;&squot;images/nombre_calles/bolivar.png&squot;;&squot;images/nombre_calles/iturbide.png&squot;;&squot;images/nombre_calles/obregon.png&squot;;&squot;images/nombre_calles/herrera.png&squot;;&squot;images/nombre_calles/negrete.png&squot;;&squot;images/nombre_calles/flores.png&squot;;&squot;images/nombre_calles/gonzalez.png&squot;;&squot;images/nombre_calles/anaya.png&squot;;&squot;images/nombre_calles/zavala.png&squot;;&squot;images/nombre_calles/jeronimo.png&squot;;&squot;images/nombre_calles/peralta.png&squot;;&squot;images/nombre_calles/moya.png&squot;;&squot;images/nombre_calles/colon.png&squot;;&squot;images/nombre_calles/teran.png&squot;;&squot;images/nombre_calles/alcazar.png&squot;;&squot;images/nombre_calles/balbuena.png&squot;;&squot;images/nombre_calles/arriaga.png&squot;;&squot;images/nombre_calles/alvarado.png&squot;;&squot;images/nombre_calles/orozco.png&squot;;&squot;images/nombre_calles/bernal.png&squot;;&squot;images/nombre_calles/rendon.png&squot;'">
   <param name="A_09" value="id='Referencias' vector='sí' matriz='sí' evaluar='una-sola-vez' columnas='33' filas='6' expresión='Ref_IMG=0;Ref_NAME=1;Ref_X=2;Ref_Y=3;Ref_DISP_X=4;Ref_DISP_Y=5;;i=0;Referencias[i,Ref_IMG]=&squot;images/iconos_mapa/icon_banco.png&squot;;Referencias[i,Ref_NAME]=&squot;el banco&squot;;i=i+1;Referencias[i,Ref_IMG]=&squot;images/iconos_mapa/icon_banyos.png&squot;;Referencias[i,Ref_NAME]=&squot;los baños&squot;;i=i+1;Referencias[i,Ref_IMG]=&squot;images/iconos_mapa/icon_biblioteca.png&squot;;Referencias[i,Ref_NAME]=&squot;la biblioteca&squot;;i=i+1;Referencias[i,Ref_IMG]=&squot;images/iconos_mapa/icon_cafeteria.png&squot;;Referencias[i,Ref_NAME]=&squot;la cafetería&squot;;i=i+1;Referencias[i,Ref_IMG]=&squot;images/iconos_mapa/icon_construccion.png&squot;;Referencias[i,Ref_NAME]=&squot;la construcción&squot;;i=i+1;Referencias[i,Ref_IMG]=&squot;images/iconos_mapa/icon_dentista.png&squot;;Referencias[i,Ref_NAME]=&squot;el dentista&squot;;i=i+1;Referencias[i,Ref_IMG]=&squot;images/iconos_mapa/icon_dulceria.png&squot;;Referencias[i,Ref_NAME]=&squot;la dulcería&squot;;i=i+1;Referencias[i,Ref_IMG]=&squot;images/iconos_mapa/icon_fruteria.png&squot;;Referencias[i,Ref_NAME]=&squot;la frutería&squot;;i=i+1;Referencias[i,Ref_IMG]=&squot;images/iconos_mapa/icon_gasolinera.png&squot;;Referencias[i,Ref_NAME]=&squot;la gasolinería&squot;;i=i+1;Referencias[i,Ref_IMG]=&squot;images/iconos_mapa/icon_hamburgesas.png&squot;;Referencias[i,Ref_NAME]=&squot;las hamburguesas&squot;;i=i+1;Referencias[i,Ref_IMG]=&squot;images/iconos_mapa/icon_heladeria.png&squot;;Referencias[i,Ref_NAME]=&squot;los helados&squot;;i=i+1;Referencias[i,Ref_IMG]=&squot;images/iconos_mapa/icon_hospital.png&squot;;Referencias[i,Ref_NAME]=&squot;el hospital&squot;;i=i+1;Referencias[i,Ref_IMG]=&squot;images/iconos_mapa/icon_joyeria.png&squot;;Referencias[i,Ref_NAME]=&squot;la joyería&squot;;i=i+1;Referencias[i,Ref_IMG]=&squot;images/iconos_mapa/icon_minisuper.png&squot;;Referencias[i,Ref_NAME]=&squot;el minisuper&squot;;i=i+1;Referencias[i,Ref_IMG]=&squot;images/iconos_mapa/icon_optica.png&squot;;Referencias[i,Ref_NAME]=&squot;la óptica&squot;;i=i+1;Referencias[i,Ref_IMG]=&squot;images/iconos_mapa/icon_peliculas.png&squot;;Referencias[i,Ref_NAME]=&squot;las películas&squot;;i=i+1;Referencias[i,Ref_IMG]=&squot;images/iconos_mapa/icon_restaurante.png&squot;;Referencias[i,Ref_NAME]=&squot;el restaurante&squot;;i=i+1;Referencias[i,Ref_IMG]=&squot;images/iconos_mapa/icon_teatro.png&squot;;Referencias[i,Ref_NAME]=&squot;el teatro&squot;;i=i+1;Referencias[i,Ref_IMG]=&squot;images/iconos_mapa/icon_zapateria.png&squot;;Referencias[i,Ref_NAME]=&squot;la zapateria&squot;;i=i+1;Referencias[i,Ref_IMG]=&squot;images/iconos_mapa/icon_zoologico.png&squot;;Referencias[i,Ref_NAME]=&squot;el zoológico&squot;;i=i+1;Referencias[i,Ref_IMG]=&squot;images/iconos_mapa/icon_hotel.png&squot;;Referencias[i,Ref_NAME]=&squot;el hotel&squot;;i=i+1;Referencias[i,Ref_IMG]=&squot;images/iconos_mapa/icon_mascotas.png&squot;;Referencias[i,Ref_NAME]=&squot;la veterinaria&squot;;i=i+1;Referencias[i,Ref_IMG]=&squot;images/iconos_mapa/icon_supermercado.png&squot;;Referencias[i,Ref_NAME]=&squot;el supermercado&squot;;i=i+1;Referencias[i,Ref_IMG]=&squot;images/iconos_mapa/icon_acuario.png&squot;;Referencias[i,Ref_NAME]=&squot;el acuario&squot;;i=i+1;Referencias[i,Ref_IMG]=&squot;images/iconos_mapa/icon_celulares.png&squot;;Referencias[i,Ref_NAME]=&squot;los celulares&squot;;i=i+1;Referencias[i,Ref_IMG]=&squot;images/iconos_mapa/icon_videojuegos.png&squot;;Referencias[i,Ref_NAME]=&squot;los videojuegos&squot;;i=i+1;Referencias[i,Ref_IMG]=&squot;images/iconos_mapa/icon_regalos.png&squot;;Referencias[i,Ref_NAME]=&squot;los regalos&squot;;i=i+1;Referencias[i,Ref_IMG]=&squot;images/iconos_mapa/icon_musica.png&squot;;Referencias[i,Ref_NAME]=&squot;la tienda de música&squot;;i=i+1;Referencias[i,Ref_IMG]=&squot;images/iconos_mapa/icon_estacionamiento.png&squot;;Referencias[i,Ref_NAME]=&squot;el estacionamiento&squot;;i=i+1;Referencias[i,Ref_IMG]=&squot;images/iconos_mapa/icon_comida_rapida.png&squot;;Referencias[i,Ref_NAME]=&squot;la comida rápida&squot;;i=i+1;Referencias[i,Ref_IMG]=&squot;images/iconos_mapa/icon_jugueteria.png&squot;;Referencias[i,Ref_NAME]=&squot;la juguetería&squot;;i=i+1;Referencias[i,Ref_IMG]=&squot;images/iconos_mapa/icon_escuela.png&squot;;Referencias[i,Ref_NAME]=&squot;la escuela&squot;;i=i+1;Referencias[i,Ref_IMG]=&squot;images/iconos_mapa/icon_circo.png&squot;;Referencias[i,Ref_NAME]=&squot;el circo&squot;'">
   <param name="A_10" value="id='Calles' vector='sí' matriz='sí' evaluar='una-sola-vez' columnas='50' filas='5' expresión='X0=0;Y0=1;X1=2;Y1=3;'">
   <param name="A_11" value="id='InterCalles' vector='sí' matriz='sí' evaluar='una-sola-vez' columnas='50' filas='100' expresión='NumInt=0;IniInt=1'">
   <param name="A_12" value="id='CallesCheck' vector='sí' matriz='sí' evaluar='una-sola-vez' columnas='50' filas='2' expresión='NumArista=0;Parent=1'">
   <param name="A_13" value="id='Instrucciones' vector='sí' matriz='sí' evaluar='una-sola-vez' columnas='50' filas='6' expresión='InstTxt=0;InstX=1;InstY=2;InstTipo=3;InstRot=4;InstImage=5;;ImgDer=&squot;images/vuelta_derecha.png&squot;;ImgIzq=&squot;images/vuelta_izquierda.png&squot;;ImgFre=&squot;images/de_frente.png&squot;;ImgObj=&squot;images/objetivo.png&squot;;;AVANZA=0;GIRA=1;FINAL=2;'">
   <param name="A_14" value="id='Camino' vector='sí' matriz='sí' evaluar='una-sola-vez' columnas='50' filas='4' expresión='CaminoNumCalle=0;CaminoPosX=1;CaminoPosY=2;CaminoInst=3;'">
   <param name="A_15" value="id='RutaPts' vector='sí' matriz='sí' evaluar='una-sola-vez' columnas='5000' expresión='RutaPts_x=0;RutaPts_y=1'">
   <param name="A_16" value="id='permutaNomCalles()' algoritmo='sí' expresión='0' algoritmo='sí' Local='i,iRnd,iTmp' inicio='i=0' hacer='iRnd=ent(rnd*NomCalles.long);;iTmp=NomCalles[i];NomCalles[i]=NomCalles[iRnd];NomCalles[iRnd]=iTmp;;iTmp=ImgCalles[i];ImgCalles[i]=ImgCalles[iRnd];ImgCalles[iRnd]=iTmp;;i=i+1' mientras='i<NomCalles.long'">
   <param name="A_17" value="id='newCalleHorizontal(y)' algoritmo='sí' expresión='0' algoritmo='sí' Local='numC,x0,x1,xN' inicio='numC=1+(rnd<0.75)*ent(rnd*3);x0=0;x1=limVer' hacer='xN=(numC==1)?x1:x0+1+ent(rnd*((x1-x0)/numC));;Calles[nCalles,X0]=x0;Calles[nCalles,Y0]=y;Calles[nCalles,X1]=xN;Calles[nCalles,Y1]=y;nCalles=nCalles+1;;x0=xN+1;numC=numC-1' mientras='numC>0'">
   <param name="A_18" value="id='agregaCallesHorizontales()' algoritmo='sí' expresión='0' algoritmo='sí' Local='i' inicio='i=1' hacer='newCalleHorizontal(i);i=i+1' mientras='i<limHor'">
   <param name="A_19" value="id='newCalleVertical(x)' algoritmo='sí' expresión='0' algoritmo='sí' Local='numC,y0,y1,yN' inicio='numC=1+(rnd<0.75)*ent(rnd*3);y0=0;y1=limHor' hacer='yN=(numC==1)?y1:y0+1+ent(rnd*((y1-y0)/numC));;Calles[nCalles,X0]=x;Calles[nCalles,Y0]=y0;Calles[nCalles,X1]=x;Calles[nCalles,Y1]=yN;nCalles=nCalles+1;;y0=yN+1;numC=numC-1' mientras='numC>0'">
   <param name="A_20" value="id='agregaCallesVerticales()' algoritmo='sí' expresión='0' algoritmo='sí' Local='i' inicio='i=1' hacer='newCalleVertical(i);i=i+1' mientras='i<limVer'">
   <param name="A_21" value="id='newCalleDiagonal_2()' algoritmo='sí' expresión='0' algoritmo='sí' Local='xRnd,xRnd2,invDir' hacer='xRnd=ent(-2 + rnd*(limVer/2+3));;Calles[nCalles,X0]=xRnd;Calles[nCalles,Y0]=0;Calles[nCalles,X1]=xRnd+(1+(rnd<0.5))*10;Calles[nCalles,Y1]=(1+(rnd<0.5))*10;;invDir=(rnd<0.5);Calles[nCalles,X0]=(invDir)?limVer-Calles[nCalles,X0]:Calles[nCalles,X0];Calles[nCalles,X1]=(invDir)?limVer-Calles[nCalles,X1]:Calles[nCalles,X1];nCalles=nCalles+1;;xRnd2=ent(-2 + rnd*(limVer/2+3));xRnd2=(xRnd2==xRnd)?xRnd+1:xRnd2;;Calles[nCalles,X0]=xRnd2;Calles[nCalles,Y0]=0;Calles[nCalles,X1]=xRnd2+(1+(rnd<0.5))*10;Calles[nCalles,Y1]=(1+(rnd<0.5))*10;;invDir=(rnd<0.5);Calles[nCalles,X0]=(invDir)?limVer-Calles[nCalles,X0]:Calles[nCalles,X0];Calles[nCalles,X1]=(invDir)?limVer-Calles[nCalles,X1]:Calles[nCalles,X1];nCalles=nCalles+1'">
   <param name="A_22" value="id='newCalleDiagonal_1()' algoritmo='sí' expresión='0' algoritmo='sí' Local='xRnd,invDir' hacer='xRnd=ent(-2 + rnd*(limVer/2+3));;Calles[nCalles,X0]=xRnd;Calles[nCalles,Y0]=0;Calles[nCalles,X1]=xRnd+(1+(rnd<0.5))*10;Calles[nCalles,Y1]=(1+(rnd<0.5))*10;;invDir=(rnd<0.5);Calles[nCalles,X0]=(invDir)?limVer-Calles[nCalles,X0]:Calles[nCalles,X0];Calles[nCalles,X1]=(invDir)?limVer-Calles[nCalles,X1]:Calles[nCalles,X1];;nCalles=nCalles+1'">
   <param name="A_23" value="id='agregaCalleDiagonal()' algoritmo='sí' expresión='0' algoritmo='sí' hacer='aux=(rnd<0.2)?newCalleDiagonal_1():((rnd<0.1)?newCalleDiagonal_2():0)'">
   <param name="A_24" value="id='ladoPunto(x0,y0,x1,y1,xp,yp)' algoritmo='sí' expresión='pos' algoritmo='sí' Local='pos' hacer='aux=&squot;positivo, el punto p esta a la izquierda del segmento&squot;;aux=&squot;negativo, el punto p esta a la derecha del segmento&squot;;aux=&squot;cero, el punto p esta sobre el segmento&squot;;;pos=sgn((x1-x0)*(yp-y0)-(y1-y0)*(xp-x0))'">
   <param name="A_25" value="id='puntosDeInterseccion(i,j)' algoritmo='sí' expresión='0' algoritmo='sí' Local='xi0,yi0,xi1,yi1,xj0,yj0,xj1,yj1,A1,B1,C1,A2,B2,C2,det' hacer='xi0=Calles[i,X0];yi0=Calles[i,Y0];xi1=Calles[i,X1];yi1=Calles[i,Y1];;xj0=Calles[j,X0];yj0=Calles[j,Y0];xj1=Calles[j,X1];yj1=Calles[j,Y1];;A1=yi1-yi0;B1=xi0-xi1;C1=A1*xi0+B1*yi0;A2=yj1-yj0;B2=xj0-xj1;C2=A2*xj0+B2*yj0;det=A1*B2-A2*B1;;inter.x=(det!=0)?(B2*C1 - B1*C2)/det:0;inter.y=(det!=0)?(A1*C2 - A2*C1)/det:0'">
   <param name="A_26" value="id='intersectaAux(i,j)' algoritmo='sí' expresión='res' algoritmo='sí' Local='res,xi0,yi0,xi1,yi1,xj0,yj0,xj1,yj1,cond1,cond2' inicio='res=0' hacer='xi0=Calles[i,X0];yi0=Calles[i,Y0];xi1=Calles[i,X1];yi1=Calles[i,Y1];;xj0=Calles[j,X0];yj0=Calles[j,Y0];xj1=Calles[j,X1];yj1=Calles[j,Y1];;cond1=(xi0==xi1)&&(xj0==xj1);cond2=(yi0==yi1)&&(yj0==yj1);;res=((!cond1)&&(!cond2))?(ladoPunto(xi0,yi0,xi1,yi1,xj0,yj0)!=ladoPunto(xi0,yi0,xi1,yi1,xj1,yj1))&&(ladoPunto(xj0,yj0,xj1,yj1,xi0,yi0)!=ladoPunto(xj0,yj0,xj1,yj1,xi1,yi1)):0;;'">
   <param name="A_27" value="id='interseccionesAux(i,j)' algoritmo='sí' expresión='0' algoritmo='sí' Local='cond' hacer='cond=intersectaAux(i,j);aux=(cond)?puntosDeInterseccion(i,j):0;;InterCalles[i,IniInt+(InterCalles[i,NumInt]*3)]=j;InterCalles[i,IniInt+(InterCalles[i,NumInt]*3+1)]=inter.x;InterCalles[i,IniInt+(InterCalles[i,NumInt]*3+2)]=inter.y;InterCalles[i,NumInt]=(cond)?InterCalles[i,NumInt]+1:InterCalles[i,NumInt];;InterCalles[j,IniInt+(InterCalles[j,NumInt]*3)]=i;InterCalles[j,IniInt+(InterCalles[j,NumInt]*3+1)]=inter.x;InterCalles[j,IniInt+(InterCalles[j,NumInt]*3+2)]=inter.y;InterCalles[j,NumInt]=(cond)?InterCalles[j,NumInt]+1:InterCalles[j,NumInt];;j=j+1' mientras='j<nCalles'">
   <param name="A_28" value="id='creaInterseccionesCalles()' algoritmo='sí' expresión='0' algoritmo='sí' Local='i' inicio='i=0' hacer='interseccionesAux(i,i+1);i=i+1' mientras='i<(nCalles-1)'">
   <param name="A_29" value="id='initIntersecciones()' algoritmo='sí' expresión='x' algoritmo='sí' Local='i' inicio='i=0' hacer='InterCalles[i,NumInt]=0;i=i+1' mientras='i<nCalles'">
   <param name="A_30" value="id='initCalles()' algoritmo='sí' expresión='x' algoritmo='sí' hacer='nCalles=0;limHor=ent(MAPA._h/MAPA.escala +0.5) +1;limVer=ent(MAPA._w/MAPA.escala +0.5) +1;;agregaCallesHorizontales();agregaCallesVerticales();_agregaCalleDiagonal();;initIntersecciones();creaInterseccionesCalles()'">
   <param name="A_31" value="id='posNomCalle(pos,s)' algoritmo='sí' expresión='res' algoritmo='sí' Local='res' inicio='res=0' hacer='verCond=(Calles[s,X0]==Calles[s,X1]);horCond=(Calles[s,Y0]==Calles[s,Y1]);;res=(pos==&squot;x&squot;)?((Calles[s,X0]+Calles[s,X1])/2)*MAPA.escala+MAPA._w/2+MAPA.Ox:res;res=(pos==&squot;y&squot;)?((-Calles[s,Y0]-Calles[s,Y1])/2)*MAPA.escala+MAPA._h/2+MAPA.Oy-MAPA.escala/10+8:res;;;res=((pos==&squot;y&squot;)&&(verCond))?((-Calles[s,Y0]-Calles[s,Y1])/2-((Calles[s,Y1]-Calles[s,Y0]+1)%2)/2)*MAPA.escala+MAPA._h/2+MAPA.Oy-MAPA.escala/10+8:res'">
   <param name="A_32" value="id='posNomCalle_TXT(pos,s)' algoritmo='sí' expresión='res' algoritmo='sí' Local='res' inicio='res=0' hacer='verCond=(Calles[s,X0]==Calles[s,X1]);horCond=(Calles[s,Y0]==Calles[s,Y1]);;res=(pos==&squot;x&squot;)?((Calles[s,X0]+Calles[s,X1])/2)*MAPA.escala+MAPA._w/2+MAPA.Ox-18:res;res=(pos==&squot;y&squot;)?((-Calles[s,Y0]-Calles[s,Y1])/2)*MAPA.escala+MAPA._h/2+MAPA.Oy-MAPA.escala/10:res;;res=((pos==&squot;y&squot;)&&(verCond))?((-Calles[s,Y0]-Calles[s,Y1])/2-((Calles[s,Y1]-Calles[s,Y0]+1)%2)/2)*MAPA.escala+MAPA._h/2+MAPA.Oy-MAPA.escala/10:res'">
   <param name="A_33" value="id='otroEjercicio()' algoritmo='sí' expresión='0' algoritmo='sí' hacer='anim=0;paso=-1;stepAnim=0;scroll.y=0;escJuan=0.5;escLupe=0.5;;unCM=50;escalaGrafica=(3+ent(rnd*5))*100;;permutaNomCalles();initCalles();colocaReferencias();agregaDestinos();;cualIcono=-1;drawing=1;drawingEnd=0;muestraEscalaMapa=0;;iniciaRuta()' mientras='NO_HAY_CAMINO'">
   <param name="A_34" value="id='_SEPARADOR_' expresión='0'">
   <param name="A_35" value="id='agregaAristaACallesCheck(i,parent)' algoritmo='sí' expresión='0' algoritmo='sí' hacer='CallesCheck[totalCallesCheck,NumArista]=i;CallesCheck[totalCallesCheck,Parent]=parent;totalCallesCheck=totalCallesCheck+1'">
   <param name="A_36" value="id='aristasContienenPunto(px,py)' algoritmo='sí' expresión='x' algoritmo='sí' Local='i,cond' inicio='i=0' hacer='x0=Calles[i,X0];y0=Calles[i,Y0];x1=Calles[i,X1];y1=Calles[i,Y1];;cond=(ladoPunto(x0,y0,x1,y1,px,py)==0)&&(min(x0,x1)<=px)&&(px<=max(x0,x1))&&(min(y0,y1)<=py)&&(py<=max(y0,y1));aux=(cond)?agregaAristaACallesCheck(i,&squot;p&squot;):0;;i=i+1' mientras='i<nCalles'">
   <param name="A_37" value="id='aristaEnCheckAristas(arista)' algoritmo='sí' expresión='cond' algoritmo='sí' Local='i,iArista,cond' inicio='i=0;cond=0' hacer='iArista=CallesCheck[i,NumArista];cond=(iArista==arista)?1:cond;;i=i+1' mientras='i<totalCallesCheck'">
   <param name="A_38" value="id='checaAristasInterseccion(iArista)' algoritmo='sí' expresión='0' algoritmo='sí' Local='i,cond,iArInter' inicio='i=0' hacer='iArInter=InterCalles[iArista,IniInt+i*3];cond=aristaEnCheckAristas(iArInter);aux=(cond)?0:agregaAristaACallesCheck(iArInter,iArista);;i=i+1' mientras='i<InterCalles[iArista,NumInt]'">
   <param name="A_39" value="id='initCallesCheck()' algoritmo='sí' expresión='0' algoritmo='sí' Local='i' inicio='i=0;totalCallesCheck=0' hacer='CallesCheck[i,NumArista]=-1;i=i+1' mientras='i<CallesCheck.long'">
   <param name="A_40" value="id='breadthFirstSearch()' algoritmo='sí' expresión='0' algoritmo='sí' Local='i,iArista' inicio='i=0' hacer='iArista=CallesCheck[i,NumArista];checaAristasInterseccion(iArista);;i=i+1' mientras='i<totalCallesCheck'">
   <param name="A_41" value="id='_SEPARADOR_' expresión='0'">
   <param name="A_42" value="id='calleContienePunto(px,py)' algoritmo='sí' expresión='calle' algoritmo='sí' Local='i,cond,calle,count' inicio='i=0;calle=-1;count=0;_CALLE_1=-1;_CALLE_2_=-1' hacer='x0=Calles[i,X0];y0=Calles[i,Y0];x1=Calles[i,X1];y1=Calles[i,Y1];;cond=(ladoPunto(x0,y0,x1,y1,px,py)==0)&&(min(x0,x1)<=px)&&(px<=max(x0,x1))&&(min(y0,y1)<=py)&&(py<=max(y0,y1));count=(cond)?count+1:count;;calle=((cond)&&(calle!=-1)&&(rnd<0.5))?i:calle;calle=((cond)&&(calle==-1))?i:calle;;_CALLE_1_=((count==1)&&(cond))?i:_CALLE_1_;_CALLE_2_=((count==2)&&(cond))?i:_CALLE_2_;;i=i+1' mientras='i<nCalles'">
   <param name="A_43" value="id='fixCamino()' algoritmo='sí' expresión='0' algoritmo='sí' Local='i,calleExtra' inicio='i=nCamino;nCamino=nCamino+1;calleExtra=(_CALLE_1_==Camino[1,CaminoNumCalle])?_CALLE_2_:_CALLE_1_' hacer='Camino[i,CaminoNumCalle]=Camino[i-1,CaminoNumCalle];;i=i-1;;Camino[1,CaminoNumCalle]=(i==1)?calleExtra:Camino[1,CaminoNumCalle];' mientras='i>1'">
   <param name="A_44" value="id='needFixCamino()' algoritmo='sí' expresión='!(cond1||cond2)' algoritmo='sí' Local='cond1,cond2' hacer='calleContienePunto(p1.x,p1.y);;cond1=(_CALLE_1_==Camino[1,CaminoNumCalle])&&(_CALLE_2_==Camino[2,CaminoNumCalle]);cond2=(_CALLE_1_==Camino[2,CaminoNumCalle])&&(_CALLE_2_==Camino[1,CaminoNumCalle]);;'">
   <param name="A_45" value="id='obtenerCamino()' algoritmo='sí' expresión='x' algoritmo='sí' Local='i,iCalle' inicio='iCalle=calleContienePunto(p1.x,p1.y)' hacer='Camino[nCamino,CaminoNumCalle]=iCalle;;iCalle=getParent(iCalle);;NO_HAY_CAMINO=(iCalle==-1);;nCamino=nCamino+1;' mientras='(iCalle!=&squot;p&squot;)&&(!NO_HAY_CAMINO)'">
   <param name="A_46" value="id='getParent(iArista)' algoritmo='sí' expresión='parent' algoritmo='sí' Local='i,parent' inicio='i=totalCallesCheck-1;parent=-1' hacer='parent=(CallesCheck[i,NumArista]==iArista)?CallesCheck[i,Parent]:parent;;i=(parent!=-1)?-1:i-1' mientras='i>=0'">
   <param name="A_47" value="id='getIntersectionPos(calle1,calle2)' algoritmo='sí' expresión='x' algoritmo='sí' Local='i,cond' inicio='i=0' hacer='cond=(InterCalles[calle1,IniInt+3*i]==calle2);InterPosX=(cond)?InterCalles[calle1,IniInt+3*i+1]:InterPosX;InterPosY=(cond)?InterCalles[calle1,IniInt+3*i+2]:InterPosY;;i=i+1' mientras='i<InterCalles[calle1,NumInt]'">
   <param name="A_48" value="id='obtenerTrayectoria()' algoritmo='sí' expresión='0' algoritmo='sí' Local='i,cond' inicio='i=1' hacer='cond=(Camino[i+1,CaminoNumCalle]!=&squot;p&squot;);;aux=(cond)?getIntersectionPos(Camino[i,CaminoNumCalle],Camino[i+1,CaminoNumCalle]):0;;Camino[i,CaminoPosX]=(cond)?InterPosX:p0.x;Camino[i,CaminoPosY]=(cond)?InterPosY:p0.y;;i=i+1' mientras='i<nCamino-1'">
   <param name="A_49" value="id='instAvanzaCalle(calle)' algoritmo='sí' expresión='inst' algoritmo='sí' Local='inst,c1,c2,x0,y0' hacer='c1=NomCalles[Camino[calle,CaminoNumCalle]];c2=NomCalles[Camino[calle-1,CaminoNumCalle]];;x0=Camino[calle,CaminoPosX];y0=Camino[calle,CaminoPosY];x1=Camino[calle-1,CaminoPosX];y1=Camino[calle-1,CaminoPosY];;cualRef=referenciaEn(x1,y1);c2=(cualRef!=-1)?Referencias[cualRef,Ref_NAME]:c2;cualCardinal=puntoCardinal(x0,y0,x1,y1);;inst=&squot;Avanza sobre &squot;+c1+&squot; hasta &squot;+c2+&squot;.&squot;;inst=(rnd<0.6)?&squot;Avanza al &squot;+cualCardinal+&squot; hasta &squot;+c2+&squot;.&squot;:inst;;Instrucciones[numInst,InstTxt]=inst;Instrucciones[numInst,InstTipo]=AVANZA;Instrucciones[numInst,InstImage]=ImgFre;Instrucciones[numInst,InstRot]=obtenerRotacion(x0,y0,x1,y1);numInst=numInst+1;Instrucciones[numInst,InstX]=x1;Instrucciones[numInst,InstY]=y1'">
   <param name="A_50" value="id='instGira(calle)' algoritmo='sí' expresión='inst' algoritmo='sí' Local='inst,c1,c2,px,py,x0,y0,x1,y1,lado' hacer='c1=NomCalles[Camino[calle+1,CaminoNumCalle]];c2=NomCalles[Camino[calle,CaminoNumCalle]];c3=NomCalles[Camino[calle-1,CaminoNumCalle]];;x0=Camino[calle+1,CaminoPosX];y0=Camino[calle+1,CaminoPosY];x1=Camino[calle,CaminoPosX];y1=Camino[calle,CaminoPosY];xp=Camino[calle-1,CaminoPosX];yp=Camino[calle-1,CaminoPosY];lado=ladoPunto(x0,y0,x1,y1,xp,yp);lado=(lado>0)?&squot;izquierda&squot;:((lado<0)?&squot;derecha&squot;:&squot;&squot;);;inst=x0+&squot;,&squot;+y0+&squot;|&squot;+x1+&squot;,&squot;+y1+&squot;|&squot;+xp+&squot;,&squot;+yp+&squot;|&squot;+lado;inst=&squot;Gira a la &squot;+lado+&squot;.&squot;;;Instrucciones[numInst,InstTxt]=inst;Instrucciones[numInst,InstTipo]=GIRA;Instrucciones[numInst,InstImage]=(lado==&squot;derecha&squot;)?ImgDer:ImgIzq;Instrucciones[numInst,InstRot]=obtenerRotacion(x1,y1,xp,yp);numInst=numInst+1;Instrucciones[numInst,InstX]=x1;Instrucciones[numInst,InstY]=y1'">
   <param name="A_51" value="id='instAvanzaFin(calle)' algoritmo='sí' expresión='inst' algoritmo='sí' Local='inst' inicio='destino=&squot;casa de Juan&squot;' hacer='inst=&squot;Llegaste a &squot;+destino+&squot;.&squot;;inst=&squot;Recorriste &squot;+caminoDist+&squot; hasta el circo.&squot;;;Instrucciones[numInst,InstTxt]=inst;Instrucciones[numInst,InstTipo]=FINAL;Instrucciones[numInst,InstImage]=ImgObj;numInst=numInst+1;Instrucciones[numInst,InstX]=Instrucciones[numInst-1,InstX];Instrucciones[numInst,InstY]=Instrucciones[numInst-1,InstY];'">
   <param name="A_52" value="id='instAvanza(calle)' algoritmo='sí' expresión='inst' algoritmo='sí' Local='inst,c1,c2,x0,y0' hacer='c1=NomCalles[Camino[calle,CaminoNumCalle]];c2=NomCalles[Camino[calle-1,CaminoNumCalle]];;x0=Camino[calle,CaminoPosX];y0=Camino[calle,CaminoPosY];x1=Camino[calle-1,CaminoPosX];y1=Camino[calle-1,CaminoPosY];;inst=&squot;Avanza sobre &squot;+c1+&squot; hasta &squot;+c2+&squot;.&squot;;;Instrucciones[numInst,InstTxt]=inst;Instrucciones[numInst,InstTipo]=AVANZA;Instrucciones[numInst,InstImage]=ImgFre;Instrucciones[numInst,InstRot]=obtenerRotacion(x0,y0,x1,y1);numInst=numInst+1;Instrucciones[numInst,InstX]=x1;Instrucciones[numInst,InstY]=y1'">
   <param name="A_53" value="id='obtenerInstrucciones2()' algoritmo='sí' expresión='0' algoritmo='sí' Local='i,cond' inicio='i=nCamino-2;numInst=0;Instrucciones[0,InstX]=p0.x;Instrucciones[0,InstY]=p0.y' hacer='cond=(i==(nCamino-2));aux=(cond)?instAvanza(i):0;;aux=(!cond)?instGira(i):0;aux=(!cond)?instAvanza(i):0;;i=i-1;;aux=(i==1)?instAvanzaFin(i):0;' mientras='i>1'">
   <param name="A_54" value="id='obtenerInstrucciones()' algoritmo='sí' expresión='0' algoritmo='sí' Local='i,cond' inicio='i=nCamino-2;numInst=0;Instrucciones[0,InstX]=p0.x;Instrucciones[0,InstY]=p0.y' hacer='cond=(i==(nCamino-2));;instAvanzaCalle(i);;i=i-1;;aux=(i==1)?instAvanzaFin(i):0;' mientras='i>1'">
   <param name="A_55" value="id='corrigeReferenciasEncimadas()' algoritmo='sí' expresión='0' algoritmo='sí' Local='i,cond' inicio='i=0' hacer='cond=((Referencias[i,Ref_X]==p0.x)&&(Referencias[i,Ref_Y]==p0.y)) || ((Referencias[i,Ref_X]==p1.x)&&(Referencias[i,Ref_Y]==p1.y));aux=(cond)?mueveReferencia(i):0;;i=i+1' mientras='i<numRefer'">
   <param name="A_56" value="id='mueveReferencia(ref)' algoritmo='sí' expresión='0' algoritmo='sí' Local='i,total,iv,ih,cond,cond1,cond2,cond3' inicio='i=0;total=((limHor-1)*(limVer-1))' hacer='iv=i%(limVer-1)+1;ih=limHor-1-ent(i/(limVer-1));;cond1=(referenciaEn(iv,ih)==-1);cond2=((Referencias[i,Ref_X]!=p0.x)||(Referencias[i,Ref_Y]!=p0.y));cond3=((Referencias[i,Ref_X]!=p1.x)||(Referencias[i,Ref_Y]!=p1.y));;cond=cond1&&cond2&&cond3;;Referencias[ref,Ref_X]=(cond)?iv:Referencias[ref,Ref_X];Referencias[ref,Ref_Y]=(cond)?ih:Referencias[ref,Ref_Y];;i=(cond)?total:i+1' mientras='i<total'">
   <param name="A_57" value="id='agregaDestinos()' algoritmo='sí' expresión='0' algoritmo='sí' Local='desv' inicio='desv=1.4' hacer='p0.x=1+ent(rnd*(limVer/2-1));p0.y=1+ent(rnd*(limHor/2-1));desvP0.x=0;desvP0.y=0;desvP0.x=((rnd<0.5)?-desv:desv)*0.2;desvP0.y=((rnd<0.5)?-desv:desv)*0.2;;p1.x=ent(limVer/2+rnd*(limVer/2));p1.x=(p1.x==p0.x)?p1.x+1:p1.x;p1.y=ent(limHor/2+rnd*(limHor/2));desvP1.x=0;desvP1.y=0;desvP1.x=((rnd<0.5)?-desv:desv)*0.2;desvP1.y=((rnd<0.5)?-desv:desv)*0.2;;initCallesCheck();aristasContienenPunto(p0.x,p0.y);breadthFirstSearch();;;Camino[0,CaminoNumCalle]=&squot;q&squot;;nCamino=1;obtenerCamino();aux=(needFixCamino())?fixCamino():0;Camino[nCamino,CaminoNumCalle]=&squot;p&squot;;nCamino=nCamino+1;;;Camino[0,CaminoPosX]=p1.x;Camino[0,CaminoPosY]=p1.y;obtenerTrayectoria();;corrigeReferenciasEncimadas();;obtenerInstrucciones();;aux=&squot;un cm en la regla es igual a 50px&squot;;aux=&squot;escalaGrafica es a cuanto equivale un cm&squot;;caminoDist=((obtenerDistancia()*MAPA.escala)/50)*escalaGrafica;enKm=(caminoDist>=1000)&&(rnd<0.5);unidad=(enKm)?&squot;km&squot;:&squot;m&squot;;caminoDist=(enKm)?_NumACadena_(caminoDist/1000,2):_NumACadena_(caminoDist,2);caminoDist=&squot;&squot;+_Num_(caminoDist);;inst=&squot;Hay &squot;+caminoDist+unidad+&squot; de la escuela al circo.&squot;;Instrucciones[numInst-1,InstTxt]=inst'">
   <param name="A_58" value="id='_SEPARADOR_' expresión='0'">
   <param name="A_59" value="id='obtenerRotacion(x1,y1,x2,y2)' algoritmo='sí' expresión='rot' algoritmo='sí' Local='rot,ux,uy' inicio='rot=0' hacer='ux=x2-x1;uy=y2-y1;rot=(ux>0)?0:rot;rot=(ux<0)?180:rot;rot=(uy>0)?90:rot;rot=(uy<0)?270:rot'">
   <param name="A_60" value="id='obtenerRotacion_OLD2()' algoritmo='sí' expresión='rot' algoritmo='sí' Local='rot,ux,uy,vx,vy,div,dir' inicio='rot=0' hacer='posAct=nCamino-2-paso;posSig=posAct-1;;ux=Camino[posSig,CaminoPosX]-Camino[posAct,CaminoPosX];uy=Camino[posSig,CaminoPosY]-Camino[posAct,CaminoPosY];rot=(ux>0)?0:rot;rot=(ux<0)?180:rot;rot=(uy>0)?90:rot;rot=(uy<0)?270:rot;;;;;;'">
   <param name="A_61" value="id='obtenerRotacion_OLD()' algoritmo='sí' expresión='rot' algoritmo='sí' Local='rot,ux,uy,vx,vy,div,dir' inicio='rot=0' hacer='posAct=nCamino-2-paso;posSig=posAct-1;;_Trace_(&squot;---------------&squot;);;ux=Camino[posAct,CaminoPosX];uy=Camino[posAct,CaminoPosY];_Trace_(ux+&squot;,&squot;+uy);;ux=Camino[posSig,CaminoPosX];uy=Camino[posSig,CaminoPosY];_Trace_(ux+&squot;,&squot;+uy);;ux=Camino[posSig,CaminoPosX]-Camino[posAct,CaminoPosX];uy=Camino[posSig,CaminoPosY]-Camino[posAct,CaminoPosY];vx=1;vy=0;div=(sqrt(ux*ux+uy*uy)*(vx*vx+vy*vy));dir=(div)?acos(abs(ux*vx+uy*vy)/div):0;rot=(dir*180)/pi;_Trace_(ux+&squot;,&squot;+uy+&squot;,&squot;+rot);;;;;'">
   <param name="A_62" value="id='_SEPARADOR_' expresión='0'">
   <param name="A_63" value="id='ajustaScroll()' algoritmo='sí' expresión='x' algoritmo='sí' Local='cond,areaVisible,posRecInst' hacer='areaVisible=-INST.Oy-INST._h/2;posRecInst=posInst.y+(paso)*posInst.h+posInst.h/2;;cond=((areaVisible+INST._h)<posRecInst);scroll.y=(cond)?scroll.y-1:scroll.y;;cond=(posRecInst<areaVisible);scroll.y=(cond)?scroll.y+1:scroll.y'">
   <param name="A_64" value="id='_SEPARADOR_' expresión='0'">
   <param name="A_65" value="id='getDist(x0,y0,x1,y1)' expresión='sqrt((x0-x1)^2+(y0-y1)^2) '">
   <param name="A_66" value="id='colocaReferencias()' algoritmo='sí' expresión='0' algoritmo='sí' Local='i,total,maxNumRefer' inicio='i=0;permutaReferencias();total=((limHor-1)*(limVer-1));maxNumRefer=10;numRefer=0' hacer='iv=i%(limVer-1);ih=ent(i/(limVer-1));;cond=(numRefer<maxNumRefer)&&(rnd<0.25);Referencias[numRefer,Ref_X]=(cond)?iv+1:Referencias[numRefer,Ref_X];Referencias[numRefer,Ref_Y]=(cond)?ih+1:Referencias[numRefer,Ref_Y];Referencias[numRefer,Ref_DISP_X]=(cond)?0.31*((rnd<0.5)?-1:1):0;Referencias[numRefer,Ref_DISP_Y]=(cond)?0.31*((rnd<0.5)?-1:1):0;numRefer=(cond)?numRefer+1:numRefer;;i=i+1' mientras='i<total'">
   <param name="A_67" value="id='permutaReferencias()' algoritmo='sí' expresión='x' algoritmo='sí' Local='i,iRnd,auxRef,tmpIMG,tmpNAME' inicio='i=0;auxRef=20' hacer='iRnd=ent(rnd*auxRef);;tmpIMG=Referencias[i,Ref_IMG];tmpNAME=Referencias[i,Ref_NAME];;Referencias[i,Ref_IMG]=Referencias[iRnd,Ref_IMG];Referencias[i,Ref_NAME]=Referencias[iRnd,Ref_NAME];Referencias[iRnd,Ref_IMG]=tmpIMG;Referencias[iRnd,Ref_NAME]=tmpNAME;;i=i+1' mientras='i<auxRef'">
   <param name="A_68" value="id='referenciaEn(x,y)' algoritmo='sí' expresión='cual' algoritmo='sí' Local='i,cond,cual' inicio='i=0;cual=-1' hacer='cond=(Referencias[i,Ref_X]==x)&&(Referencias[i,Ref_Y]==y);cual=(cond)?i:cual;;i=(cond)?numRefer+1:i+1' mientras='i<numRefer'">
   <param name="A_69" value="id='puntoCardinal(x0,y0,x1,y1)' algoritmo='sí' expresión='res' algoritmo='sí' Local='res' hacer='res=((x0==x1)&&(y0<y1))?&squot;norte&squot;:res;res=((x0==x1)&&(y0>y1))?&squot;sur&squot;:res;res=((x0<x1)&&(y0==y1))?&squot;este&squot;:res;res=((x0>x1)&&(y0==y1))?&squot;oeste&squot;:res'">
   <param name="A_70" value="id='obtenerDistancia()' algoritmo='sí' expresión='dist' algoritmo='sí' Local='i,initx,inity,dist' inicio='i=0;initx=p0.x;inity=p0.y;dist=0' hacer='dist=dist+getDist(initx,inity,Instrucciones[i,InstX],Instrucciones[i,InstY]);;initx=Instrucciones[i,InstX];inity=Instrucciones[i,InstY];;i=i+1' mientras='i<numInst'">
   <param name="A_71" value="id='getIcon(x,y)' algoritmo='sí' expresión='cual' algoritmo='sí' Local='i,cond,cual,aux_x,aux_y,dif_x,dif_y' inicio='i=0;cual=-1' hacer='aux_x=Referencias[i,Ref_X]+Referencias[i,Ref_DISP_X];aux_y=Referencias[i,Ref_Y]+Referencias[i,Ref_DISP_Y];;dif_x=abs(aux_x-x);dif_y=abs(aux_y-y);;cond=(dif_x<0.15)&&(dif_y<0.15);cual=(cond)?i:cual;;pos_globo_x=(cond)?aux_x+((aux_x>5)?-1.5:1.5):pos_globo_x;pos_globo_y=(cond)?aux_y:pos_globo_y;globo_dir=(cond)?((aux_x>5)?-1:1):globo_dir;globo_txt=(cond)?Referencias[cual,Ref_NAME]:globo_txt;;i=(cond)?numRefer+1:i+1;;cual=(i==numRefer)?isEndPoint(x,y):cual' mientras='i<numRefer'">
   <param name="A_72" value="id='isEndPoint(x,y)' algoritmo='sí' expresión='cual' algoritmo='sí' inicio='cual=-1' hacer='aux_x=p0.x+desvP0.x;aux_y=p0.y+desvP0.y;dif_x=abs(aux_x-x);dif_y=abs(aux_y-y);cond=(dif_x<0.15)&&(dif_y<0.15);cual=(cond)?31:cual;pos_globo_x=(cond)?aux_x+((aux_x>5)?-1.5:1.5):pos_globo_x;pos_globo_y=(cond)?aux_y:pos_globo_y;globo_dir=(cond)?((aux_x>5)?-1:1):globo_dir;globo_txt=(cond)?&squot;la escuela&squot;:globo_txt;;aux_x=p1.x+desvP1.x;aux_y=p1.y+desvP1.y;dif_x=abs(aux_x-x);dif_y=abs(aux_y-y);cond=(dif_x<0.15)&&(dif_y<0.15);cual=(cond)?32:cual;pos_globo_x=(cond)?aux_x+((aux_x>5)?-1.5:1.5):pos_globo_x;pos_globo_y=(cond)?aux_y:pos_globo_y;globo_dir=(cond)?((aux_x>5)?-1:1):globo_dir;globo_txt=(cond)?&squot;el circo&squot;:globo_txt;;'">
   <param name="A_73" value="id='draw(mp,mx,my)' algoritmo='sí' expresión='0' algoritmo='sí' Local='enCalle,mCalle1,mCalle2,aux,antCalle1,antCalle2,mismaCalle,distAlUltimo,distCond,isHor,tmpCalle,newX,newY,antX,antY,cleanCond,esquinaCond,iguales' hacer='enCalle=puntoEnCalles(mx,my);mCalle1=r_calle_1;mCalle2=r_calle_2;;aux=(numRutaPts>0)?puntoEnCalles(RutaPts[numRutaPts-1,RutaPts_x],RutaPts[numRutaPts-1,RutaPts_y]):0;antCalle1=(aux)?r_calle_1:-2;antCalle2=(aux)?r_calle_2:-2;mismaCalle=((mCalle1==antCalle1)||(mCalle1==antCalle2))||((mCalle2!=-1)&&((mCalle2==antCalle1)||(mCalle2==antCalle2)));;distAlUltimo=(numRutaPts>0)?getDist(mx,my,RutaPts[numRutaPts-1,RutaPts_x],RutaPts[numRutaPts-1,RutaPts_y]):0;distCond=(distAlUltimo<0.5)||(mismaCalle);;isHor=(mCalle1!=-1)?isHorizontal(mCalle1):0;tmpCalle=((dirAnt!=isHor)&&(mCalle2!=-1))?mCalle2:mCalle1;aux=(enCalle&&distCond)?proyeccionCalle(mx,my,tmpCalle):0;dirAnt=(enCalle&&distCond)?isHorizontal(tmpCalle):dirAnt;;newX=(enCalle&&distCond)?PROY_X:mx;newY=(enCalle&&distCond)?PROY_Y:my;;antX=(numRutaPts>1)?RutaPts[numRutaPts-1,RutaPts_x]:-1;antY=(numRutaPts>1)?RutaPts[numRutaPts-1,RutaPts_y]:-1;antAntX=(numRutaPts>1)?RutaPts[numRutaPts-2,RutaPts_x]:-2;antAntY=(numRutaPts>1)?RutaPts[numRutaPts-2,RutaPts_y]:-2;;cleanCond=(numRutaPts>1)&&(enCalle&&distCond)&&(((antAntX==antX)&&(antX==newX))||((antAntY==antY)&&(antY==newY)));esquinaCond=(numRutaPts>1)&&(enCalle&&distCond)&&!(((antAntX==antX)&&(antX==newX))||((antAntY==antY)&&(antY==newY)));;RutaPts[numRutaPts-1,RutaPts_x]=(cleanCond)?newX:RutaPts[numRutaPts-1,RutaPts_x];RutaPts[numRutaPts-1,RutaPts_y]=(cleanCond)?newY:RutaPts[numRutaPts-1,RutaPts_y];RutaPts[numRutaPts-1,RutaPts_x]=(esquinaCond)?ent(antX+0.5):RutaPts[numRutaPts-1,RutaPts_x];RutaPts[numRutaPts-1,RutaPts_y]=(esquinaCond)?ent(antY+0.5):RutaPts[numRutaPts-1,RutaPts_y];;iguales=(numRutaPts>1)&&(RutaPts[numRutaPts-1,RutaPts_x]==RutaPts[numRutaPts-2,RutaPts_x])&&(RutaPts[numRutaPts-1,RutaPts_y]==RutaPts[numRutaPts-2,RutaPts_y]);numRutaPts=(iguales)?numRutaPts-2:numRutaPts;;RutaPts[numRutaPts,RutaPts_x]=newX;RutaPts[numRutaPts,RutaPts_y]=newY;;RutaPts[0,RutaPts_x]=p0.x;RutaPts[0,RutaPts_y]=p0.y;;numRutaPts=(mp&&enCalle&&distCond&&!cleanCond)?numRutaPts+1:numRutaPts;'">
   <param name="A_74" value="id='puntoEnCalles(px,py)' algoritmo='sí' expresión='enCalle' algoritmo='sí' Local='x0,y0,x1,y1,i,cond,calle,count,enCalle' inicio='i=0;calle=-1;count=0;r_calle_1=-1;r_calle_2=-1;enCalle=0' hacer='x0=Calles[i,X0];y0=Calles[i,Y0];x1=Calles[i,X1];y1=Calles[i,Y1];;cond=estaEnCalle(px,py,x0,y0,x1,y1);count=(cond)?count+1:count;enCalle=(enCalle||cond);;r_calle_1=((count==1)&&(cond))?i:r_calle_1;r_calle_2=((count==2)&&(cond))?i:r_calle_2;;i=i+1' mientras='i<nCalles'">
   <param name="A_75" value="id='estaEnCalle(px,py,x0,y0,x1,y1)' algoritmo='sí' expresión='cond' algoritmo='sí' Local='num,den,u,cond,d,npx,npy,minD' inicio='minD=0.15' hacer='num=(px-x0)*(x1-x0)+(py-y0)*(y1-y0);den=(x1-x0)^2+(y1-y0)^2;u=(den!=0)?num/den:10000;;npx=x0+u*(x1-x0);npy=y0+u*(y1-y0);d=getDist(npx,npy,px,py);;cond=((u>=0)&&(u<=1))&&(d>=0)&&(d<=minD)'">
   <param name="A_76" value="id='proyeccionCalle(px,py,calle)' algoritmo='sí' expresión='0' algoritmo='sí' Local='x0,y0,x1,y1,num,den,u' hacer='x0=Calles[calle,X0];y0=Calles[calle,Y0];x1=Calles[calle,X1];y1=Calles[calle,Y1];;num=(px-x0)*(x1-x0)+(py-y0)*(y1-y0);den=(x1-x0)^2+(y1-y0)^2;u=(den!=0)?num/den:10000;;PROY_X=x0+u*(x1-x0);PROY_Y=y0+u*(y1-y0)'">
   <param name="A_77" value="id='isHorizontal(calle)' expresión='Calles[calle,Y0]==Calles[calle,Y1]'">
   <param name="A_78" value="id='iniciaRuta()' algoritmo='sí' expresión='0' algoritmo='sí' hacer='RutaPts[0,RutaPts_x]=p0.x;RutaPts[0,RutaPts_y]=p0.y;numRutaPts=1;bienRuta=0;verificadoRuta=0;muestraEscala=0'">
   <param name="A_79" value="id='ultimoCerca()' algoritmo='sí' expresión='condX&&condY' algoritmo='sí' Local='condX,condY' hacer='condX=abs(RutaPts[numRutaPts-1,RutaPts_x]-Instrucciones[numInst-1,InstX])<0.35;condY=abs(RutaPts[numRutaPts-1,RutaPts_y]-Instrucciones[numInst-1,InstY])<0.35'">
   <param name="A_80" value="id='verificarRuta()' algoritmo='sí' expresión='0' algoritmo='sí' Local='i' inicio='i=0;verificadoRuta=1;bienElUltimo=ultimoCerca();bienRuta=((numInst==numRutaPts)||(numInst==(numRutaPts-1)))&&(bienElUltimo)' hacer='bienRuta=bienRuta&&(ent(RutaPts[i,RutaPts_x]+0.5)==Instrucciones[i,InstX])&&(ent(RutaPts[i,RutaPts_y]+0.5)==Instrucciones[i,InstY]);i=i+1' mientras='i<numInst'">
   <param name="A_81" value="id='verificar()' algoritmo='sí' expresión='0' algoritmo='sí' inicio='showShadeCover()' hacer='verificarRuta();;muestraEscala=bienRuta'">
   <param name="A_82" value="id='_SEPARADOR_' expresión='0'">
   <param name="A_83" value="id='showShadeCover()' algoritmo='sí' expresión='0' algoritmo='sí' hacer='parent.exec(&squot;showShadeCover&squot;,&squot;&squot;);parent.set(&squot;SHADE.ver&squot;, 1);parent.update()'">
   <param name="A_84" value="id='hideShadeCover()' algoritmo='sí' expresión='0' algoritmo='sí' hacer='parent.exec(&squot;hideShadeCover&squot;,&squot;&squot;);parent.set(&squot;SHADE.ver&squot;,0);parent.update()'">
   <param name="A_85" value="id='posLength(pos,s)' algoritmo='sí' expresión='res' algoritmo='sí' Local='res,verCond,horCond' inicio='res=0' hacer='x0=Instrucciones[s,InstX];y0=Instrucciones[s,InstY];x1=Instrucciones[s+1,InstX];y1=Instrucciones[s+1,InstY];;verCond=(x0==x1);horCond=(y0==y1);;res=(pos==&squot;x&squot;)?((x0+x1)/2)*MAPA.escala+MAPA._w/2+MAPA.Ox:res;res=(pos==&squot;y&squot;)?((-y0-y1)/2)*MAPA.escala+MAPA._h/2+MAPA.Oy:res;;distTemp=sqrt((x0-x1)^2+(y0-y1)^2);distTemp=((distTemp*MAPA.escala)/50)*escalaGrafica;distText=(enKm)?_NumACadena_(distTemp/1000,2):_NumACadena_(distTemp,2);distText=_Num_(distText)+unidad;;posLength.w=10+_AnchoDeCadena_(distText,&squot;SansSerif&squot;,&squot;BOLD&squot;,&squot;15&squot;);posLength.h=18;;res=((verCond)&&(pos=&squot;x&squot;))?res+10:res;res=((verCond)&&(pos=&squot;x&squot;)&&(res>MAPA._w/2))?res-20-posLength.w:res;res=((verCond)&&(pos=&squot;y&squot;))?res-8:res;res=((horCond)&&(pos=&squot;x&squot;))?res-posLength.w/2:res;res=((horCond)&&(pos=&squot;y&squot;))?res-28:res;'">
   <param name="A_86" value="id='posLengthM(s)' algoritmo='sí' expresión='1' algoritmo='sí' Local='resX,resY,verCond,horCond' hacer='x0=Instrucciones[s,InstX];y0=Instrucciones[s,InstY];x1=Instrucciones[s+1,InstX];y1=Instrucciones[s+1,InstY];;verCond=(x0==x1);horCond=(y0==y1);;resX=((x0+x1)/2)*MAPA.escala+MAPA._w/2+MAPA.Ox;resY=((-y0-y1)/2)*MAPA.escala+MAPA._h/2+MAPA.Oy;;distTemp=sqrt((x0-x1)^2+(y0-y1)^2);distTemp=((distTemp*MAPA.escala)/50)*escalaGrafica;distText=(enKm)?_NumACadena_(distTemp/1000,2):_NumACadena_(distTemp,2);distText=_Num_(distText)+unidad;;posLength.w=10+_AnchoDeCadena_(distText,&squot;SansSerif&squot;,&squot;BOLD&squot;,&squot;15&squot;);posLength.h=18;;xCond=(resX>MAPA._w/2);resX=(verCond)?resX+10:resX;resX=((verCond)&&(xCond))?resX-20-posLength.w:resX;resY=(verCond)?resY-8:resY;resX=(horCond)?resX-posLength.w/2:resX;resY=(horCond)?resY-28:resY;;globo.A= 51/255;globo.A=0;globo.R= 39/255;globo.G=174/255;globo.B= 96/255;globo.TamPunta=8;globo.X=resX;globo.Y=resY;globo.W=posLength.w;globo.H=posLength.h;globo.DirPunta=(horCond)?globo.ABA:globo.DirPunta;globo.DirPunta=((verCond)&&(xCond))?globo.DER:globo.DirPunta;globo.DirPunta=((verCond)&&(!xCond))?globo.IZQ:globo.DirPunta'">
   <param name="A_87" value="id='INICIO' algoritmo='sí' evaluar='una-sola-vez' inicio='titulo=&squot;Explora dibujando sobre el mapa la ruta indicada por las instrucciones.&squot;' hacer='Inicio()'">
   <param name="A_88" value="id='CALCULOS' algoritmo='sí' evaluar='siempre' hacer='Calculos();aux=(drawing&&!drawingEnd)?draw(RUTA.mouse_pressed,RUTA.mouse_x,RUTA.mouse_y):0'">
   <param name="A_89" value="id='animar_camino' evento='sí' condición='anim' acción='animar' ejecución='alternar' pos_mensajes='centro'">
   <param name="A_90" value="id='mouse_pressed' evento='sí' condición='MAPA.mouse_pressed' acción='calcular' parámetro='cualIcono=getIcon(MAPA.mouse_x,MAPA.mouse_y)' ejecución='alternar' pos_mensajes='centro'">
   <param name="G_01" value="espacio='E2' tipo='macro' fondo='sí' expresión='macros/borde.txt' nombre='bMapa' info='borde del panel del mapa'">
   <param name="G_02" value="espacio='E2' tipo='macro' fondo='sí' expresión='macros/borde.txt' nombre='bInst' info='borde del panel de instrucciones'">
   <param name="G_03" value="espacio='E2' tipo='macro' fondo='sí' dibujar-si='0' expresión='macros/borde.txt' nombre='bExtra'">
   <param name="G_04" value="espacio='RETRO' tipo='macro' fondo='sí' expresión='macros/borde.txt' nombre='bRetro'">
   <param name="G_05" value="espacio='E2' tipo='punto' dibujar-si='0' expresión='(_SEPARADOR_,_SEPARADOR_)' fijo='sí' info='(_SEPARADOR_)'">
   <param name="G_06" value="espacio='E2' tipo='texto' fondo='sí' color='34495e' expresión='[60,16]' texto='[titulo]' fuente='SansSerif,BOLD,24' fijo='sí' info='Título'">
   <param name="G_07" value="espacio='INST' tipo='polígono' color='cc000000' dibujar-si='paso>=0' expresión='(posInst.x,-(posInst.y+(paso)*posInst.h))(posInst.x+posInst.w-(showScroll*32),-(posInst.y+(paso)*posInst.h))(posInst.x+posInst.w-(showScroll*32),-(posInst.y+(paso+1)*posInst.h))(posInst.x,-(posInst.y+(paso+1)*posInst.h))(posInst.x,-(posInst.y+(paso)*posInst.h))' relleno='f3ecf7' ancho='0' info='marco sobre instruccion'">
   <param name="G_08" value="espacio='INST' tipo='segmento' color='cc000000' dibujar-si='(paso>=0)' expresión='(posInst.x+1,-(posInst.y+(paso+1)*posInst.h-1))(posInst.x+posInst.w-1-(showScroll*32),-(posInst.y+(paso+1)*posInst.h-1))' fijo='sí' tamaño='0' ancho='2' info='borde inferior del marco sobre instruccion'">
   <param name="G_09" value="espacio='INST' tipo='imagen' dibujar-si='0' expresión='(posInst.x+20,-12-(posInst.y+10+s*posInst.h),0.65,0.65)' familia='s' s.intervalo='[0,numInst-1]' s.pasos='numInst-1' archivo='Instrucciones[s,InstImage]'">
   <param name="G_10" value="espacio='INST' tipo='punto' color='34495e' dibujar-si='(anim)?1:(s!=(numInst-1))' expresión='(posInst.x+10,-21-(posInst.y+10+s*posInst.h))' familia='s' s.intervalo='[0,numInst-1]' s.pasos='numInst-1' texto='[Instrucciones[s,InstTxt]]' fuente='SansSerif,PLAIN,20' fijo='no' tamaño='0' info='instrucciones [s+1].'">
   <param name="G_11" value="espacio='MAPA' tipo='segmento' color='d6d0c6' expresión='(Calles[s,X0],Calles[s,Y0])(Calles[s,X1],Calles[s,Y1])' familia='s' s.intervalo='[0,nCalles-1]' s.pasos='nCalles-1' fijo='sí' tamaño='0' ancho='callesSegW' info='calle borde'">
   <param name="G_12" value="espacio='MAPA' tipo='segmento' color='blanco' expresión='(Calles[s,X0],Calles[s,Y0])(Calles[s,X1],Calles[s,Y1])' familia='s' s.intervalo='[0,nCalles-1]' s.pasos='nCalles-1' fijo='sí' tamaño='0' ancho='callesSegW-2' info='calle'">
   <param name="G_13" value="espacio='MAPA' tipo='imagen' dibujar-si='muestraRosa' coord_abs='sí' expresión='(MAPA._w/2,MAPA._h/2,1,1)' archivo='images/rosaVientos.png'">
   <param name="G_14" value="espacio='MAPA' tipo='segmento' color='95a4a7' dibujar-si='s<=paso' expresión='(Instrucciones[s,InstX],Instrucciones[s,InstY])(Instrucciones[s+1,InstX],Instrucciones[s+1,InstY])' familia='s' s.intervalo='[0,numInst-1]' s.pasos='numInst-1' fijo='no' tamaño='0' ancho='callesSegW-4' info='camino'">
   <param name="G_15" value="espacio='MAPA' tipo='segmento' color='blanco' dibujar-si='s<=paso' expresión='(Instrucciones[s,InstX],Instrucciones[s,InstY])(Instrucciones[s+1,InstX],Instrucciones[s+1,InstY])' familia='s' s.intervalo='[0,numInst-1]' s.pasos='numInst-1' fijo='no' tamaño='4' ancho='0' info='camino'">
   <param name="G_16" value="espacio='MAPA' tipo='curva' color='1ecf6d' dibujar-si='(!bienRuta)&&(numRutaPts>1)' expresión='(RutaPts[t,RutaPts_x],RutaPts[t,RutaPts_y])' t.intervalo='[0,numRutaPts-1]' t.pasos='numRutaPts-1' ancho='callesSegW-4' info='ruta dibujada'">
   <param name="G_17" value="espacio='MAPA' tipo='segmento' color='551ecf6d' dibujar-si='0&&(numRutaPts>1)' expresión='(RutaPts[s,RutaPts_x],RutaPts[s,RutaPts_y])(RutaPts[s+1,RutaPts_x],RutaPts[s+1,RutaPts_y])' familia='s' s.intervalo='[0,numRutaPts-2]' s.pasos='numRutaPts-2' fijo='sí' ancho='11' info='ruta dibujada'">
   <param name="G_18" value="espacio='MAPA' tipo='punto' color='blanco' dibujar-si='(!bienRuta)&&(numRutaPts>0)' expresión='(RutaPts[s,RutaPts_x],RutaPts[s,RutaPts_y])' familia='s' s.intervalo='[0,numRutaPts-1]' s.pasos='numRutaPts-1' fijo='sí' tamaño='4' info='punto de la ruta dibujada'">
   <param name="G_19" value="espacio='MAPA' tipo='imagen' dibujar-si='(paso>=0)&&(paso<numInst-1)' expresión='(Instrucciones[paso+1,InstX],Instrucciones[paso+1,InstY],1,1)' archivo='images/cursor.png' rotini='Instrucciones[paso,InstRot]' info='cursor'">
   <param name="G_20" value="espacio='MAPA' tipo='imagen' expresión='(Referencias[s,Ref_X]+Referencias[s,Ref_DISP_X],Referencias[s,Ref_Y]+Referencias[s,Ref_DISP_Y],0.85,0.85)' familia='s' s.intervalo='[0,numRefer-1]' s.pasos='numRefer-1' archivo='Referencias[s,Ref_IMG]'">
   <param name="G_21" value="espacio='MAPA' tipo='imagen' expresión='(p0.x+desvP0.x,p0.y+desvP0.y,escLupe,escLupe)' archivo='images/icon_origen.png' info='origen casa lupe'">
   <param name="G_22" value="espacio='MAPA' tipo='imagen' expresión='(p1.x+desvP1.x,p1.y+desvP1.y,escJuan,escJuan)' archivo='images/icon_destino.png' info='destino casa juan'">
   <param name="G_23" value="espacio='MAPA' tipo='imagen' coord_abs='sí' expresión='(posNomCalle(&squot;x&squot;,s),posNomCalle(&squot;y&squot;,s),0.8,0.8)' familia='s' s.intervalo='[0,nCalles-1]' s.pasos='nCalles-1' archivo='ImgCalles[s]' rotini='(verCond)*90'">
   <param name="G_24" value="espacio='E2' tipo='texto' dibujar-si='0' expresión='[0,0]' texto='[numRutaPts] [bienRuta]' fijo='sí'">
   <param name="G_25" value="espacio='E2' tipo='polígono' dibujar-si='muestraEscala' coord_abs='sí' expresión='(bExtra.x+bExtra.w-anchoEscala+(s%4)*50,bExtra.y+margenEscalaY+ent(s/4)*altoEscala)(bExtra.x+bExtra.w-anchoEscala+50+(s%4)*50,bExtra.y+margenEscalaY+ent(s/4)*altoEscala)(bExtra.x+bExtra.w-anchoEscala+50+(s%4)*50,bExtra.y+margenEscalaY+ent(s/4)*altoEscala+altoEscala)(bExtra.x+bExtra.w-anchoEscala+(s%4)*50,bExtra.y+margenEscalaY+ent(s/4)*altoEscala+altoEscala)(bExtra.x+bExtra.w-anchoEscala+(s%4)*50,bExtra.y+margenEscalaY+ent(s/4)*altoEscala)' familia='s' s.intervalo='[0,7]' s.pasos='7' relleno='((s+ent(s/4))%2,(s+ent(s/4))%2,(s+ent(s/4))%2,00)'">
   <param name="G_26" value="espacio='E2' tipo='texto' dibujar-si='muestraEscala' expresión='[bExtra.x+bExtra.w-anchoEscala+s*50-7,bExtra.y+margenEscalaY-20]' familia='s' s.intervalo='[0,4]' s.pasos='4' texto='[s][(s==4)?&squot;cm&squot;:&squot;&squot;]' fuente='SansSerif,BOLD,18' fijo='no'">
   <param name="G_27" value="espacio='E2' tipo='texto' dibujar-si='muestraEscala' expresión='[bExtra.x+bExtra.w-anchoEscala+s*50-7-((s>0)?12:0),bExtra.y+margenEscalaY+23]' familia='s' s.intervalo='[0,4]' s.pasos='4' texto='[s*escalaGrafica][(s==4)?&squot;m&squot;:&squot;&squot;]' fuente='SansSerif,BOLD,18' fijo='no'">
   <param name="G_28" value="espacio='MAPA' tipo='imagen' dibujar-si='cualIcono>=0' expresión='(pos_globo_x,pos_globo_y,globo_dir,1)' archivo='images/globo_texto.png'">
   <param name="G_29" value="espacio='MAPA' tipo='punto' color='34495e' dibujar-si='cualIcono>=0' expresión='(pos_globo_x-((_strWidth_(globo_txt,&squot;SansSerif&squot;,&squot;BOLD&squot;,&squot;18&squot;)+10)/MAPA.escala)/2,pos_globo_y-0.08)' texto='[globo_txt]' fuente='SansSerif,BOLD,18' fijo='sí' tamaño='0'">
   <param name="G_30" value="espacio='RUTA' tipo='arco' color='blanco' dibujar-si='(numRutaPts>0)' centro='(RutaPts[numRutaPts-1,RutaPts_x],RutaPts[numRutaPts-1,RutaPts_y])' radio='0.4' fin='360' fijo='sí' relleno='cc000000' ancho='2'">
   <param name="G_31" value="espacio='RETRO' tipo='texto' color='e67e22' dibujar-si='bienRuta' expresión='[bRetro.x+80,bRetro.y+40]' texto='                    ¡Muy bien!\n\nLa ruta que trazaste sigue las \ninstrucciones.' fuente='SansSerif,BOLD,22' fijo='sí'">
   <param name="G_32" value="espacio='RETRO' tipo='texto' color='e67e22' dibujar-si='(!bienRuta)&&(bienElUltimo)' expresión='[bRetro.x+60,bRetro.y+40]' texto='La ruta que trazaste te lleva de la \nescuela al circo, pero no sigue las \ninstrucciones.\n\n¡Intenta dibujar la ruta de nuevo!' fuente='SansSerif,BOLD,22' fijo='sí'">
   <param name="G_33" value="espacio='RETRO' tipo='texto' color='e67e22' dibujar-si='(!bienRuta)&&(!bienElUltimo)' expresión='[bRetro.x+60,bRetro.y+40]' texto='La ruta que trazaste no te lleva de \nla escuela al circo y no sigue las \ninstrucciones.\n\n¡Intenta dibujar la ruta de nuevo!' fuente='SansSerif,BOLD,22' fijo='sí'">
   <param name="G_34" value="espacio='MAPA' tipo='macro' dibujar-si='(muestraEscalaMapa)&&(s<=paso)&&(posLengthM(s))' expresión='macros/globo.txt' familia='s' s.intervalo='[0,numInst-2]' s.pasos='numInst-2' nombre='globo'">
   <param name="G_35" value="espacio='MAPA' tipo='texto' color='blanco' dibujar-si='(muestraEscalaMapa)&&(s<=paso)' expresión='[posLength(&squot;x&squot;,s)+2,posLength(&squot;y&squot;,s)+3]' familia='s' s.intervalo='[0,numInst-2]' s.pasos='numInst-2' texto='[distText]' fuente='SansSerif,BOLD,15' fijo='sí'">
   <param name="Animación" value="pausa='800' controles='no' auto='no' hacer='stepAnim=(stepAnim+1)%(numInst+6);;paso=((stepAnim-1)>=numInst)?numInst-1:stepAnim-1;;escJuan=((stepAnim-1)>=numInst)?((escJuan==0.5)?1:0.5):0.5;escLupe=((stepAnim-1)>=numInst)?((escLupe==0.5)?1:0.5):0.5;;paso=(!anim)?-1:paso;stepAnim=(!anim)?0:stepAnim;escJuan=(!anim)?0.5:escJuan;escLupe=(!anim)?0.5:escLupe;;scroll.y=(paso<=0)?0:scroll.y;ajustaScroll()' mientras='anim'">
</ajs>

<script type="descartes/macro" id="macros/borde.txt">
tipo_de_macro=R2
Idioma=español
id='INICIO' algoritmo='sí' evaluar='una-sola-vez' hacer='w=200;h=100;x=150;y=150;A=0;R=1;G=1;V=1'
tipo='imagen' coord_abs='sí' expresión='(x,y,1,1)' archivo='macros/borde_ar_iz.png' 
tipo='imagen' coord_abs='sí' expresión='(x+w/2,y,w-8,1)' archivo='macros/borde_ar_ce.png' 
tipo='imagen' coord_abs='sí' expresión='(x+w,y,1,1)' archivo='macros/borde_ar_de.png' 
tipo='imagen' coord_abs='sí' expresión='(x,y+h/2,1,h-8)' archivo='macros/borde_ce_iz.png' 
tipo='imagen' coord_abs='sí' expresión='(x+w,y+h/2,1,h-8)' archivo='macros/borde_ce_de.png' 
tipo='imagen' coord_abs='sí' expresión='(x,y+h+2,1,1)' archivo='macros/borde_ab_iz.png' 
tipo='imagen' coord_abs='sí' expresión='(x+w/2,y+h+2,w-8,1)' archivo='macros/borde_ab_ce.png' 
tipo='imagen' coord_abs='sí' expresión='(x+w,y+h+2,1,1)' archivo='macros/borde_ab_de.png' 
tipo='polígono' coord_abs='sí' expresión='(x,y)(x+w,y)(x+w,y+h+2)(x,y+h+2)(x,y)' relleno='(R,G,V,A)' ancho='0' 
tipo='segmento' color='c0000000' coord_abs='sí' expresión='(x+1,y+h+1)(x+w-1,y+h+1)' fijo='sí' tamaño='0' ancho='2' 
</script>

<script type="descartes/macro" id="macros/globo.txt">
tipo_de_macro=R2
Idioma=español
id='INICIO' algoritmo='sí' evaluar='una-sola-vez' hacer='IZQ=0;DER=1;ARR=2;ABA=3;X=100;Y=100;W=100;H=40;A=0;R=1;G=0;B=0;TamPunta=20;DirPunta=ABA;'
tipo='polígono' coord_abs='sí' expresión='(X,Y)(X+W,Y)(X+W,Y+H)(X,Y+H)(X,Y)' relleno='(R,G,B,A)' ancho='0' 
tipo='polígono' dibujar-si='DirPunta==IZQ' coord_abs='sí' expresión='(X-TamPunta,Y+H/2)(X,Y+H/2-TamPunta/2)(X,Y+H/2+TamPunta/2)(X-TamPunta,Y+H/2)' relleno='(R,G,B,A)' ancho='0' 
tipo='polígono' dibujar-si='DirPunta==DER' coord_abs='sí' expresión='(X+W+TamPunta,Y+H/2)(X+W,Y+H/2-TamPunta/2)(X+W,Y+H/2+TamPunta/2)(X+W+TamPunta,Y+H/2)' relleno='(R,G,B,A)' ancho='0' 
tipo='polígono' dibujar-si='DirPunta==ARR' coord_abs='sí' expresión='(X+W/2,Y-TamPunta)(X+W/2-TamPunta/2,Y)(X+W/2+TamPunta/2,Y)(X+W/2,Y-TamPunta)' relleno='(R,G,B,A)' ancho='0' 
tipo='polígono' dibujar-si='DirPunta==ABA' coord_abs='sí' expresión='(X+W/2,Y+H+TamPunta)(X+W/2-TamPunta/2,Y+H)(X+W/2+TamPunta/2,Y+H)(X+W/2,Y+H+TamPunta)' relleno='(R,G,B,A)' ancho='0' 
</script>

</body>

</html>