<!DOCTYPE html>

<html>

<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta name="keywords" content="SEP, UNAM, APRENDEMX, IMATE, LITE, Laboratorio LITE, recorrido, distancia, longitud, trayectoria, calles, instrucciones, girar, avanzar">

<head>
	<title>Mapas</title>
	<link rel="stylesheet" href="../fonts/style.css" type="text/css">
	<link rel="stylesheet" href="css/btn_style.css" type="text/css">
	<script type='text/javascript' src='../lib/descartes-min.js'></script>
</head>

<body style="margin:0px; padding:0px">

<ajs name="Descartes" width=1024 height=568 code="Descartes">
   <param name="tamaño" value="1024x568">
   <param name="image_loader" value="images/transp_1x1.png">
   <param name="expand" value="">
   <param name="editable" value="no">
   <param name="decimal_symbol" value=".">
   <param name="antialias" value="sí">
   <param name="deshacer" value="no">
   <param name="nombre" value="Descartes">
   <param name="Versión" value="5.353, 2016-02-17">
   <param name="Idioma" value="español">
   <param name="Botones" value="créditos=no config=no inicio=no limpiar=no ancho_este=150 ancho_oeste=150 alto=40">
   <param name="E_01" value="tipo='R2' id='E2' ancho='1024' alto='568' fijo='sí' escala='1' despl_imagen='arr-izq' fondo='ecf0f1' red='no' red10='no' ejes='no' texto='no'">
   <param name="E_02" value="tipo='R2' id='MAPA' x='bMapa.x' y='bMapa.y' ancho='560' alto='490' fijo='sí' escala='70' O.x='-315' O.y='280' despl_imagen='arr-izq' fondo='e9e5dc' red='no' red10='no' ejes='no' texto='no'">
   <param name="E_03" value="tipo='R2' id='INST' x='bInst.x' y='bInst.y' ancho='404' alto='423' escala='1' O.x='-50%' O.y='-50%' despl_imagen='arr-izq' fondo='blanco' red='no' red10='no' ejes='no' texto='no'">
   <param name="C_01" value="id='otroMapa' tipo='numérico' interfaz='botón' región='interior' espacio='E2' expresión='(E2._w-66,E2._h-66,46,46)' fijo='sí' visible='sí' color='blanco' color-int='9b59b6' negrita='sí' fuente puntos='24' imagen='_STYLE_|class=btnAprendeMx lavanda mapa|shadowTextColor=rgba(0,0,0,0.2)|shadowTextOffsetY=2|shadowTextBlur=0|textBorder=0' acción='calcular' parámetro='otroEjercicio()\ndoPlay(0)'">
   <param name="C_02" value="id='no' tipo='numérico' interfaz='botón' región='interior' espacio='E2' nombre='          No llega' expresión='(bInst.x,E2._h-66,159,46)' fijo='sí' visible='sí' color='blanco' color-int='rojo' negrita='sí' fuente puntos='24' imagen='_STYLE_|class=btnAprendeMx bermellon dislike|shadowTextColor=rgba(0,0,0,0.2)|shadowTextOffsetY=2|shadowTextBlur=0|textBorder=0' acción='calcular' parámetro='verificar(0)\ndoPlay(0)' dibujar-si='!verificado' pos_mensajes='centro'">
   <param name="C_03" value="id='si' tipo='numérico' interfaz='botón' región='interior' espacio='E2' nombre='          Sí llega' expresión='(bInst.x+159+20,E2._h-66,159,46)' fijo='sí' visible='sí' color='blanco' color-int='verde' negrita='sí' fuente puntos='24' imagen='_STYLE_|class=btnAprendeMx verdeClaro like|shadowTextColor=rgba(0,0,0,0.2)|shadowTextOffsetY=2|shadowTextBlur=0|textBorder=0' acción='calcular' parámetro='verificar(1)\ndoPlay(0)' dibujar-si='!verificado' pos_mensajes='centro'">
   <param name="A_01" value="id='tryPlay(k)' algoritmo='sí' expresión='0' algoritmo='sí' hacer='parent.exec(&squot;tryPlay&squot;,&squot;EXP&squot;)'">
   <param name="A_02" value="id='doPlay(k)' algoritmo='sí' algoritmo='sí' hacer='parent.exec(&squot;doPlay&squot;,k);parent.update()'">
   <param name="A_03" value="id='_SEPARADOR_' expresión='0'">
   <param name="A_04" value="id='Inicio()' algoritmo='sí' expresión='0' algoritmo='sí' inicio='scroll_image_h=60' hacer='callesSegW=MAPA.escala/4;otroEjercicio();;posInst.x=6;posInst.y=6;posInst.w=INST._w-14;posInst.h=46;;bMapa.x=20;bMapa.y=56;bMapa.w=MAPA._w;bMapa.h=MAPA._h;bInst.x=600;bInst.y=bMapa.y;bInst.w=INST._w;bInst.h=INST._h;;bInst.h_2=-INST._h/2;'">
   <param name="A_05" value="id='Calculos()' algoritmo='sí' expresión='0' algoritmo='sí' Local='cond' inicio='showScroll=((numInst-9)>0)' hacer='capInst=(showScroll)?numInst-9:0;scroll.y=ent(max(min(0,scroll.y),-capInst));;showScroll=0;;INST.Oy=(anim)?(-INST._h/2+(scroll.y)*posInst.h):INST.Oy;INST.Oy=min(bInst.h_2, INST.Oy);INST.Oy=max(bInst.h_2-posInst.h*capInst, INST.Oy);INST.Ox=-202'">
   <param name="A_06" value="id='_SEPARADOR_' expresión='0'">
   <param name="A_07" value="id='NomCalles' vector='sí' evaluar='una-sola-vez' tamaño='50' expresión='&squot;Madero&squot;;&squot;Hidalgo&squot;;&squot;Costa&squot;;&squot;León&squot;;&squot;García&squot;;&squot;López&squot;;&squot;Juárez&squot;;&squot;Serdán&squot;;&squot;Zapata&squot;;&squot;Villa&squot;;&squot;Mina&squot;;&squot;Galeana&squot;;&squot;María&squot;;&squot;Jara&squot;;&squot;Victoria&squot;;&squot;Allende&squot;;&squot;Zaragoza&squot;;&squot;Rayón&squot;;&squot;Morelos&squot;;&squot;Pino&squot;;&squot;Sierra&squot;;&squot;Vicario&squot;;&squot;Cárdenas&squot;;&squot;Cabrera&squot;;&squot;Montaño&squot;;&squot;Moreno&squot;;&squot;Carranza&squot;;&squot;Guerrero&squot;;&squot;Escutia&squot;;&squot;Bolívar&squot;;&squot;Iturbide&squot;;&squot;Obregón&squot;;&squot;Herrera&squot;;&squot;Negrete&squot;;&squot;Flores&squot;;&squot;González&squot;;&squot;Anaya&squot;;&squot;Zavala&squot;;&squot;Jerónimo&squot;;&squot;Peralta&squot;;&squot;Moya&squot;;&squot;Colón&squot;;&squot;Terán&squot;;&squot;Alcázar&squot;;&squot;Balbuena&squot;;&squot;Arriaga&squot;;&squot;Alvarado&squot;;&squot;Orozco&squot;;&squot;Bernal&squot;;&squot;Rendón&squot;'">
   <param name="A_08" value="id='ImgCalles' vector='sí' evaluar='una-sola-vez' tamaño='50' expresión='&squot;images/nombre_calles/madero.png&squot;;&squot;images/nombre_calles/hidalgo.png&squot;;&squot;images/nombre_calles/costa.png&squot;;&squot;images/nombre_calles/leon.png&squot;;&squot;images/nombre_calles/garcia.png&squot;;&squot;images/nombre_calles/lopez.png&squot;;&squot;images/nombre_calles/juarez.png&squot;;&squot;images/nombre_calles/serdan.png&squot;;&squot;images/nombre_calles/zapata.png&squot;;&squot;images/nombre_calles/villa.png&squot;;&squot;images/nombre_calles/mina.png&squot;;&squot;images/nombre_calles/galeana.png&squot;;&squot;images/nombre_calles/maria.png&squot;;&squot;images/nombre_calles/jara.png&squot;;&squot;images/nombre_calles/victoria.png&squot;;&squot;images/nombre_calles/allende.png&squot;;&squot;images/nombre_calles/zaragoza.png&squot;;&squot;images/nombre_calles/rayon.png&squot;;&squot;images/nombre_calles/morelos.png&squot;;&squot;images/nombre_calles/pino.png&squot;;&squot;images/nombre_calles/sierra.png&squot;;&squot;images/nombre_calles/vicario.png&squot;;&squot;images/nombre_calles/cardenas.png&squot;;&squot;images/nombre_calles/cabrera.png&squot;;&squot;images/nombre_calles/montanyo.png&squot;;&squot;images/nombre_calles/moreno.png&squot;;&squot;images/nombre_calles/carranza.png&squot;;&squot;images/nombre_calles/guerrero.png&squot;;&squot;images/nombre_calles/escutia.png&squot;;&squot;images/nombre_calles/bolivar.png&squot;;&squot;images/nombre_calles/iturbide.png&squot;;&squot;images/nombre_calles/obregon.png&squot;;&squot;images/nombre_calles/herrera.png&squot;;&squot;images/nombre_calles/negrete.png&squot;;&squot;images/nombre_calles/flores.png&squot;;&squot;images/nombre_calles/gonzalez.png&squot;;&squot;images/nombre_calles/anaya.png&squot;;&squot;images/nombre_calles/zavala.png&squot;;&squot;images/nombre_calles/jeronimo.png&squot;;&squot;images/nombre_calles/peralta.png&squot;;&squot;images/nombre_calles/moya.png&squot;;&squot;images/nombre_calles/colon.png&squot;;&squot;images/nombre_calles/teran.png&squot;;&squot;images/nombre_calles/alcazar.png&squot;;&squot;images/nombre_calles/balbuena.png&squot;;&squot;images/nombre_calles/arriaga.png&squot;;&squot;images/nombre_calles/alvarado.png&squot;;&squot;images/nombre_calles/orozco.png&squot;;&squot;images/nombre_calles/bernal.png&squot;;&squot;images/nombre_calles/rendon.png&squot;'">
   <param name="A_09" value="id='Calles' vector='sí' matriz='sí' evaluar='una-sola-vez' columnas='50' filas='5' expresión='X0=0;Y0=1;X1=2;Y1=3;'">
   <param name="A_10" value="id='InterCalles' vector='sí' matriz='sí' evaluar='una-sola-vez' columnas='50' filas='100' expresión='NumInt=0;IniInt=1'">
   <param name="A_11" value="id='CallesCheck' vector='sí' matriz='sí' evaluar='una-sola-vez' columnas='50' filas='2' expresión='NumArista=0;Parent=1'">
   <param name="A_12" value="id='Instrucciones' vector='sí' matriz='sí' evaluar='una-sola-vez' columnas='50' filas='6' expresión='InstTxt=0;InstX=1;InstY=2;InstTipo=3;InstRot=4;InstImage=5;;ImgDer=&squot;images/vuelta_derecha.png&squot;;ImgIzq=&squot;images/vuelta_izquierda.png&squot;;ImgFre=&squot;images/de_frente.png&squot;;ImgObj=&squot;images/objetivo.png&squot;;;AVANZA=0;GIRA=1;FINAL=2;'">
   <param name="A_13" value="id='Camino' vector='sí' matriz='sí' evaluar='una-sola-vez' columnas='50' filas='4' expresión='CaminoNumCalle=0;CaminoPosX=1;CaminoPosY=2;CaminoInst=3;'">
   <param name="A_14" value="id='permutaNomCalles()' algoritmo='sí' expresión='0' algoritmo='sí' Local='i,iRnd,iTmp' inicio='i=0' hacer='iRnd=ent(rnd*NomCalles.long);;iTmp=NomCalles[i];NomCalles[i]=NomCalles[iRnd];NomCalles[iRnd]=iTmp;;iTmp=ImgCalles[i];ImgCalles[i]=ImgCalles[iRnd];ImgCalles[iRnd]=iTmp;;i=i+1' mientras='i<NomCalles.long'">
   <param name="A_15" value="id='newCalleHorizontal(y)' algoritmo='sí' expresión='0' algoritmo='sí' Local='numC,x0,x1,xN' inicio='numC=1+(rnd<0.75)*ent(rnd*3);x0=0;x1=limVer' hacer='xN=(numC==1)?x1:x0+1+ent(rnd*((x1-x0)/numC));;Calles[nCalles,X0]=x0;Calles[nCalles,Y0]=y;Calles[nCalles,X1]=xN;Calles[nCalles,Y1]=y;nCalles=nCalles+1;;x0=xN+1;numC=numC-1' mientras='numC>0'">
   <param name="A_16" value="id='agregaCallesHorizontales()' algoritmo='sí' expresión='0' algoritmo='sí' Local='i' inicio='i=1' hacer='newCalleHorizontal(i);i=i+1' mientras='i<limHor'">
   <param name="A_17" value="id='newCalleVertical(x)' algoritmo='sí' expresión='0' algoritmo='sí' Local='numC,y0,y1,yN' inicio='numC=1+(rnd<0.75)*ent(rnd*3);y0=0;y1=limHor' hacer='yN=(numC==1)?y1:y0+1+ent(rnd*((y1-y0)/numC));;Calles[nCalles,X0]=x;Calles[nCalles,Y0]=y0;Calles[nCalles,X1]=x;Calles[nCalles,Y1]=yN;nCalles=nCalles+1;;y0=yN+1;numC=numC-1' mientras='numC>0'">
   <param name="A_18" value="id='agregaCallesVerticales()' algoritmo='sí' expresión='0' algoritmo='sí' Local='i' inicio='i=1' hacer='newCalleVertical(i);i=i+1' mientras='i<limVer'">
   <param name="A_19" value="id='newCalleDiagonal_2()' algoritmo='sí' expresión='0' algoritmo='sí' Local='xRnd,xRnd2,invDir' hacer='xRnd=ent(-2 + rnd*(limVer/2+3));;Calles[nCalles,X0]=xRnd;Calles[nCalles,Y0]=0;Calles[nCalles,X1]=xRnd+(1+(rnd<0.5))*10;Calles[nCalles,Y1]=(1+(rnd<0.5))*10;;invDir=(rnd<0.5);Calles[nCalles,X0]=(invDir)?limVer-Calles[nCalles,X0]:Calles[nCalles,X0];Calles[nCalles,X1]=(invDir)?limVer-Calles[nCalles,X1]:Calles[nCalles,X1];nCalles=nCalles+1;;xRnd2=ent(-2 + rnd*(limVer/2+3));xRnd2=(xRnd2==xRnd)?xRnd+1:xRnd2;;Calles[nCalles,X0]=xRnd2;Calles[nCalles,Y0]=0;Calles[nCalles,X1]=xRnd2+(1+(rnd<0.5))*10;Calles[nCalles,Y1]=(1+(rnd<0.5))*10;;invDir=(rnd<0.5);Calles[nCalles,X0]=(invDir)?limVer-Calles[nCalles,X0]:Calles[nCalles,X0];Calles[nCalles,X1]=(invDir)?limVer-Calles[nCalles,X1]:Calles[nCalles,X1];nCalles=nCalles+1'">
   <param name="A_20" value="id='newCalleDiagonal_1()' algoritmo='sí' expresión='0' algoritmo='sí' Local='xRnd,invDir' hacer='xRnd=ent(-2 + rnd*(limVer/2+3));;Calles[nCalles,X0]=xRnd;Calles[nCalles,Y0]=0;Calles[nCalles,X1]=xRnd+(1+(rnd<0.5))*10;Calles[nCalles,Y1]=(1+(rnd<0.5))*10;;invDir=(rnd<0.5);Calles[nCalles,X0]=(invDir)?limVer-Calles[nCalles,X0]:Calles[nCalles,X0];Calles[nCalles,X1]=(invDir)?limVer-Calles[nCalles,X1]:Calles[nCalles,X1];;nCalles=nCalles+1'">
   <param name="A_21" value="id='agregaCalleDiagonal()' algoritmo='sí' expresión='0' algoritmo='sí' hacer='aux=(rnd<0.2)?newCalleDiagonal_1():((rnd<0.1)?newCalleDiagonal_2():0)'">
   <param name="A_22" value="id='ladoPunto(x0,y0,x1,y1,xp,yp)' algoritmo='sí' expresión='pos' algoritmo='sí' Local='pos' hacer='aux=&squot;positivo, el punto p esta a la izquierda del segmento&squot;;aux=&squot;negativo, el punto p esta a la derecha del segmento&squot;;aux=&squot;cero, el punto p esta sobre el segmento&squot;;;pos=sgn((x1-x0)*(yp-y0)-(y1-y0)*(xp-x0))'">
   <param name="A_23" value="id='puntosDeInterseccion(i,j)' algoritmo='sí' expresión='0' algoritmo='sí' Local='xi0,yi0,xi1,yi1,xj0,yj0,xj1,yj1,A1,B1,C1,A2,B2,C2,det' hacer='xi0=Calles[i,X0];yi0=Calles[i,Y0];xi1=Calles[i,X1];yi1=Calles[i,Y1];;xj0=Calles[j,X0];yj0=Calles[j,Y0];xj1=Calles[j,X1];yj1=Calles[j,Y1];;A1=yi1-yi0;B1=xi0-xi1;C1=A1*xi0+B1*yi0;A2=yj1-yj0;B2=xj0-xj1;C2=A2*xj0+B2*yj0;det=A1*B2-A2*B1;;inter.x=(det!=0)?(B2*C1 - B1*C2)/det:0;inter.y=(det!=0)?(A1*C2 - A2*C1)/det:0'">
   <param name="A_24" value="id='intersectaAux(i,j)' algoritmo='sí' expresión='res' algoritmo='sí' Local='res,xi0,yi0,xi1,yi1,xj0,yj0,xj1,yj1,cond1,cond2' inicio='res=0' hacer='xi0=Calles[i,X0];yi0=Calles[i,Y0];xi1=Calles[i,X1];yi1=Calles[i,Y1];;xj0=Calles[j,X0];yj0=Calles[j,Y0];xj1=Calles[j,X1];yj1=Calles[j,Y1];;cond1=(xi0==xi1)&&(xj0==xj1);cond2=(yi0==yi1)&&(yj0==yj1);;res=((!cond1)&&(!cond2))?(ladoPunto(xi0,yi0,xi1,yi1,xj0,yj0)!=ladoPunto(xi0,yi0,xi1,yi1,xj1,yj1))&&(ladoPunto(xj0,yj0,xj1,yj1,xi0,yi0)!=ladoPunto(xj0,yj0,xj1,yj1,xi1,yi1)):0;;'">
   <param name="A_25" value="id='interseccionesAux(i,j)' algoritmo='sí' expresión='0' algoritmo='sí' Local='cond' hacer='cond=intersectaAux(i,j);aux=(cond)?puntosDeInterseccion(i,j):0;;InterCalles[i,IniInt+(InterCalles[i,NumInt]*3)]=j;InterCalles[i,IniInt+(InterCalles[i,NumInt]*3+1)]=inter.x;InterCalles[i,IniInt+(InterCalles[i,NumInt]*3+2)]=inter.y;InterCalles[i,NumInt]=(cond)?InterCalles[i,NumInt]+1:InterCalles[i,NumInt];;InterCalles[j,IniInt+(InterCalles[j,NumInt]*3)]=i;InterCalles[j,IniInt+(InterCalles[j,NumInt]*3+1)]=inter.x;InterCalles[j,IniInt+(InterCalles[j,NumInt]*3+2)]=inter.y;InterCalles[j,NumInt]=(cond)?InterCalles[j,NumInt]+1:InterCalles[j,NumInt];;j=j+1' mientras='j<nCalles'">
   <param name="A_26" value="id='creaInterseccionesCalles()' algoritmo='sí' expresión='0' algoritmo='sí' Local='i' inicio='i=0' hacer='interseccionesAux(i,i+1);i=i+1' mientras='i<(nCalles-1)'">
   <param name="A_27" value="id='initIntersecciones()' algoritmo='sí' expresión='x' algoritmo='sí' Local='i' inicio='i=0' hacer='InterCalles[i,NumInt]=0;i=i+1' mientras='i<nCalles'">
   <param name="A_28" value="id='initCalles()' algoritmo='sí' expresión='x' algoritmo='sí' hacer='nCalles=0;limHor=ent(MAPA._h/MAPA.escala +0.5) +1;limVer=ent(MAPA._w/MAPA.escala +0.5) +1;;agregaCallesHorizontales();agregaCallesVerticales();_agregaCalleDiagonal();;initIntersecciones();creaInterseccionesCalles()'">
   <param name="A_29" value="id='posNomCalle(pos,s)' algoritmo='sí' expresión='res' algoritmo='sí' Local='res' inicio='res=0' hacer='verCond=(Calles[s,X0]==Calles[s,X1]);horCond=(Calles[s,Y0]==Calles[s,Y1]);;res=(pos==&squot;x&squot;)?((Calles[s,X0]+Calles[s,X1])/2)*MAPA.escala+MAPA._w/2+MAPA.Ox:res;res=(pos==&squot;y&squot;)?((-Calles[s,Y0]-Calles[s,Y1])/2)*MAPA.escala+MAPA._h/2+MAPA.Oy-MAPA.escala/10+8:res;;;res=((pos==&squot;y&squot;)&&(verCond))?((-Calles[s,Y0]-Calles[s,Y1])/2-((Calles[s,Y1]-Calles[s,Y0]+1)%2)/2)*MAPA.escala+MAPA._h/2+MAPA.Oy-MAPA.escala/10+8:res'">
   <param name="A_30" value="id='posNomCalle_TXT(pos,s)' algoritmo='sí' expresión='res' algoritmo='sí' Local='res' inicio='res=0' hacer='verCond=(Calles[s,X0]==Calles[s,X1]);horCond=(Calles[s,Y0]==Calles[s,Y1]);;res=(pos==&squot;x&squot;)?((Calles[s,X0]+Calles[s,X1])/2)*MAPA.escala+MAPA._w/2+MAPA.Ox-18:res;res=(pos==&squot;y&squot;)?((-Calles[s,Y0]-Calles[s,Y1])/2)*MAPA.escala+MAPA._h/2+MAPA.Oy-MAPA.escala/10:res;;res=((pos==&squot;y&squot;)&&(verCond))?((-Calles[s,Y0]-Calles[s,Y1])/2-((Calles[s,Y1]-Calles[s,Y0]+1)%2)/2)*MAPA.escala+MAPA._h/2+MAPA.Oy-MAPA.escala/10:res'">
   <param name="A_31" value="id='otroEjercicio()' algoritmo='sí' expresión='0' algoritmo='sí' hacer='respuestaCorrecta=(rnd<0.5);bien=0;verificado=0;anim=0;paso=-1;stepAnim=0;scroll.y=0;escJuan=0.5;escLupe=0.5;;permutaNomCalles();initCalles();agregaDestinos()' mientras='NO_HAY_CAMINO'">
   <param name="A_32" value="id='_SEPARADOR_' expresión='0'">
   <param name="A_33" value="id='agregaAristaACallesCheck(i,parent)' algoritmo='sí' expresión='0' algoritmo='sí' hacer='CallesCheck[totalCallesCheck,NumArista]=i;CallesCheck[totalCallesCheck,Parent]=parent;totalCallesCheck=totalCallesCheck+1'">
   <param name="A_34" value="id='aristasContienenPunto(px,py)' algoritmo='sí' expresión='x' algoritmo='sí' Local='i,cond' inicio='i=0' hacer='x0=Calles[i,X0];y0=Calles[i,Y0];x1=Calles[i,X1];y1=Calles[i,Y1];;cond=(ladoPunto(x0,y0,x1,y1,px,py)==0)&&(min(x0,x1)<=px)&&(px<=max(x0,x1))&&(min(y0,y1)<=py)&&(py<=max(y0,y1));aux=(cond)?agregaAristaACallesCheck(i,&squot;p&squot;):0;;i=i+1' mientras='i<nCalles'">
   <param name="A_35" value="id='aristaEnCheckAristas(arista)' algoritmo='sí' expresión='cond' algoritmo='sí' Local='i,iArista,cond' inicio='i=0;cond=0' hacer='iArista=CallesCheck[i,NumArista];cond=(iArista==arista)?1:cond;;i=i+1' mientras='i<totalCallesCheck'">
   <param name="A_36" value="id='checaAristasInterseccion(iArista)' algoritmo='sí' expresión='0' algoritmo='sí' Local='i,cond,iArInter' inicio='i=0' hacer='iArInter=InterCalles[iArista,IniInt+i*3];cond=aristaEnCheckAristas(iArInter);aux=(cond)?0:agregaAristaACallesCheck(iArInter,iArista);;i=i+1' mientras='i<InterCalles[iArista,NumInt]'">
   <param name="A_37" value="id='initCallesCheck()' algoritmo='sí' expresión='0' algoritmo='sí' Local='i' inicio='i=0;totalCallesCheck=0' hacer='CallesCheck[i,NumArista]=-1;i=i+1' mientras='i<CallesCheck.long'">
   <param name="A_38" value="id='breadthFirstSearch()' algoritmo='sí' expresión='0' algoritmo='sí' Local='i,iArista' inicio='i=0' hacer='iArista=CallesCheck[i,NumArista];checaAristasInterseccion(iArista);;i=i+1' mientras='i<totalCallesCheck'">
   <param name="A_39" value="id='_SEPARADOR_' expresión='0'">
   <param name="A_40" value="id='calleContienePunto(px,py)' algoritmo='sí' expresión='calle' algoritmo='sí' Local='i,cond,calle,count' inicio='i=0;calle=-1;count=0' hacer='x0=Calles[i,X0];y0=Calles[i,Y0];x1=Calles[i,X1];y1=Calles[i,Y1];;cond=(ladoPunto(x0,y0,x1,y1,px,py)==0)&&(min(x0,x1)<=px)&&(px<=max(x0,x1))&&(min(y0,y1)<=py)&&(py<=max(y0,y1));count=(cond)?count+1:count;;calle=((cond)&&(calle!=-1)&&(rnd<0.5))?i:calle;calle=((cond)&&(calle==-1))?i:calle;;_CALLE_1_=((count==1)&&(cond))?i:_CALLE_1_;_CALLE_2_=((count==2)&&(cond))?i:_CALLE_2_;;i=i+1' mientras='i<nCalles'">
   <param name="A_41" value="id='fixCamino()' algoritmo='sí' expresión='0' algoritmo='sí' Local='i,calleExtra' inicio='i=nCamino;nCamino=nCamino+1;calleExtra=(_CALLE_1_==Camino[1,CaminoNumCalle])?_CALLE_2_:_CALLE_1_' hacer='Camino[i,CaminoNumCalle]=Camino[i-1,CaminoNumCalle];;i=i-1;;Camino[1,CaminoNumCalle]=(i==1)?calleExtra:Camino[1,CaminoNumCalle];' mientras='i>1'">
   <param name="A_42" value="id='needFixCamino()' algoritmo='sí' expresión='!(cond1||cond2)' algoritmo='sí' Local='cond1,cond2' hacer='calleContienePunto(p1.x,p1.y);;cond1=(_CALLE_1_==Camino[1,CaminoNumCalle])&&(_CALLE_2_==Camino[2,CaminoNumCalle]);cond2=(_CALLE_1_==Camino[2,CaminoNumCalle])&&(_CALLE_2_==Camino[1,CaminoNumCalle]);;'">
   <param name="A_43" value="id='obtenerCamino()' algoritmo='sí' expresión='x' algoritmo='sí' Local='i,iCalle' inicio='iCalle=calleContienePunto(p1.x,p1.y)' hacer='Camino[nCamino,CaminoNumCalle]=iCalle;;iCalle=getParent(iCalle);;NO_HAY_CAMINO=(iCalle==-1);;nCamino=nCamino+1;' mientras='(iCalle!=&squot;p&squot;)&&(!NO_HAY_CAMINO)'">
   <param name="A_44" value="id='getParent(iArista)' algoritmo='sí' expresión='parent' algoritmo='sí' Local='i,parent' inicio='i=totalCallesCheck-1;parent=-1' hacer='parent=(CallesCheck[i,NumArista]==iArista)?CallesCheck[i,Parent]:parent;;i=(parent!=-1)?-1:i-1' mientras='i>=0'">
   <param name="A_45" value="id='getIntersectionPos(calle1,calle2)' algoritmo='sí' expresión='x' algoritmo='sí' Local='i,cond' inicio='i=0' hacer='cond=(InterCalles[calle1,IniInt+3*i]==calle2);InterPosX=(cond)?InterCalles[calle1,IniInt+3*i+1]:InterPosX;InterPosY=(cond)?InterCalles[calle1,IniInt+3*i+2]:InterPosY;;i=i+1' mientras='i<InterCalles[calle1,NumInt]'">
   <param name="A_46" value="id='obtenerTrayectoria()' algoritmo='sí' expresión='0' algoritmo='sí' Local='i,cond' inicio='i=1' hacer='cond=(Camino[i+1,CaminoNumCalle]!=&squot;p&squot;);;aux=(cond)?getIntersectionPos(Camino[i,CaminoNumCalle],Camino[i+1,CaminoNumCalle]):0;;Camino[i,CaminoPosX]=(cond)?InterPosX:p0.x;Camino[i,CaminoPosY]=(cond)?InterPosY:p0.y;;i=i+1' mientras='i<nCamino-1'">
   <param name="A_47" value="id='instGira(calle)' algoritmo='sí' expresión='inst' algoritmo='sí' Local='inst,c1,c2,px,py,x0,y0,x1,y1,lado' hacer='c1=NomCalles[Camino[calle+1,CaminoNumCalle]];c2=NomCalles[Camino[calle,CaminoNumCalle]];c3=NomCalles[Camino[calle-1,CaminoNumCalle]];;x0=Camino[calle+1,CaminoPosX];y0=Camino[calle+1,CaminoPosY];x1=Camino[calle,CaminoPosX];y1=Camino[calle,CaminoPosY];xp=Camino[calle-1,CaminoPosX];yp=Camino[calle-1,CaminoPosY];lado=ladoPunto(x0,y0,x1,y1,xp,yp);lado=(lado>0)?&squot;izquierda&squot;:((lado<0)?&squot;derecha&squot;:&squot;&squot;);;inst=x0+&squot;,&squot;+y0+&squot;|&squot;+x1+&squot;,&squot;+y1+&squot;|&squot;+xp+&squot;,&squot;+yp+&squot;|&squot;+lado;inst=&squot;Gira a la &squot;+lado+&squot;.&squot;;;Instrucciones[numInst,InstTxt]=inst;Instrucciones[numInst,InstTipo]=GIRA;Instrucciones[numInst,InstImage]=(lado==&squot;derecha&squot;)?ImgDer:ImgIzq;Instrucciones[numInst,InstRot]=obtenerRotacion(x1,y1,xp,yp);numInst=numInst+1;Instrucciones[numInst,InstX]=x1;Instrucciones[numInst,InstY]=y1'">
   <param name="A_48" value="id='instAvanza(calle)' algoritmo='sí' expresión='inst' algoritmo='sí' Local='inst,c1,c2,x0,y0' hacer='c1=NomCalles[Camino[calle,CaminoNumCalle]];c2=NomCalles[Camino[calle-1,CaminoNumCalle]];;x0=Camino[calle,CaminoPosX];y0=Camino[calle,CaminoPosY];x1=Camino[calle-1,CaminoPosX];y1=Camino[calle-1,CaminoPosY];;inst=&squot;Avanza sobre &squot;+c1+&squot; hasta &squot;+c2+&squot;.&squot;;;Instrucciones[numInst,InstTxt]=inst;Instrucciones[numInst,InstTipo]=AVANZA;Instrucciones[numInst,InstImage]=ImgFre;Instrucciones[numInst,InstRot]=obtenerRotacion(x0,y0,x1,y1);numInst=numInst+1;Instrucciones[numInst,InstX]=x1;Instrucciones[numInst,InstY]=y1'">
   <param name="A_49" value="id='instAvanzaFin(calle)' algoritmo='sí' expresión='inst' algoritmo='sí' Local='inst' inicio='destino=&squot;casa de Juan&squot;' hacer='inst=&squot;Llegaste a &squot;+destino+&squot;.&squot;;;Instrucciones[numInst,InstTxt]=inst;Instrucciones[numInst,InstTipo]=FINAL;Instrucciones[numInst,InstImage]=ImgObj;numInst=numInst+1;Instrucciones[numInst,InstX]=Instrucciones[numInst-1,InstX];Instrucciones[numInst,InstY]=Instrucciones[numInst-1,InstY];'">
   <param name="A_50" value="id='obtenerInstrucciones()' algoritmo='sí' expresión='0' algoritmo='sí' Local='i,cond' inicio='i=nCamino-2;numInst=0;Instrucciones[0,InstX]=p0.x;Instrucciones[0,InstY]=p0.y' hacer='cond=(i==(nCamino-2));aux=(cond)?instAvanza(i):0;;aux=(!cond)?instGira(i):0;aux=(!cond)?instAvanza(i):0;;i=i-1;;aux=(i==1)?instAvanzaFin(i):0;' mientras='i>1'">
   <param name="A_51" value="id='agregaDestinos()' algoritmo='sí' expresión='0' algoritmo='sí' Local='desv' inicio='desv=1.4' hacer='p0.x=1+ent(rnd*(limVer/2-1));p0.y=1+ent(rnd*(limHor/2-1));;p1.x=ent(limVer/2+rnd*(limVer/2));p1.x=(p1.x==p0.x)?p1.x+1:p1.x;p1.y=ent(limHor/2+rnd*(limHor/2));;p2.x=ent(limVer/2+rnd*(limVer/2));p2.x=(p2.x==p1.x)?p2.x+1:p2.x;p2.y=ent(limHor/2+rnd*(limHor/2));;desvP0.x=((rnd<0.5)?-desv:desv)*0.2;desvP0.y=((rnd<0.5)?-desv:desv)*0.2;desvP1.x=((rnd<0.5)?-desv:desv)*0.2;desvP1.y=((rnd<0.5)?-desv:desv)*0.2;desvP2.x=((rnd<0.5)?-desv:desv)*0.2;desvP2.y=((rnd<0.5)?-desv:desv)*0.2;;initCallesCheck();aristasContienenPunto(p0.x,p0.y);breadthFirstSearch();;;Camino[0,CaminoNumCalle]=&squot;q&squot;;nCamino=1;obtenerCamino();aux=(needFixCamino())?fixCamino():0;Camino[nCamino,CaminoNumCalle]=&squot;p&squot;;nCamino=nCamino+1;;;Camino[0,CaminoPosX]=p1.x;Camino[0,CaminoPosY]=p1.y;obtenerTrayectoria();;obtenerInstrucciones()'">
   <param name="A_52" value="id='_SEPARADOR_' expresión='0'">
   <param name="A_53" value="id='obtenerRotacion(x1,y1,x2,y2)' algoritmo='sí' expresión='rot' algoritmo='sí' Local='rot,ux,uy' inicio='rot=0' hacer='ux=x2-x1;uy=y2-y1;rot=(ux>0)?0:rot;rot=(ux<0)?180:rot;rot=(uy>0)?90:rot;rot=(uy<0)?270:rot'">
   <param name="A_54" value="id='_SEPARADOR_' expresión='0'">
   <param name="A_55" value="id='ajustaScroll()' algoritmo='sí' expresión='x' algoritmo='sí' Local='cond,areaVisible,posRecInst' hacer='areaVisible=-INST.Oy-INST._h/2;posRecInst=posInst.y+(paso)*posInst.h+posInst.h/2;;cond=((areaVisible+INST._h)<posRecInst);scroll.y=(cond)?scroll.y-1:scroll.y;;cond=(posRecInst<areaVisible);scroll.y=(cond)?scroll.y+1:scroll.y'">
   <param name="A_56" value="id='verificar(resp)' algoritmo='sí' expresión='x' algoritmo='sí' hacer='bien=(respuestaCorrecta==resp);verificado=1;anim=1'">
   <param name="A_57" value="id='INICIO' algoritmo='sí' evaluar='una-sola-vez' inicio='titulo=&squot;Ponte a prueba. Decide si Lupe llega a casa de Juan, siguiendo las instrucciones.&squot;' hacer='Inicio();'">
   <param name="A_58" value="id='CALCULOS' algoritmo='sí' evaluar='siempre' hacer='Calculos();'">
   <param name="A_59" value="id='animar_camino' evento='sí' condición='anim' acción='animar' ejecución='alternar' pos_mensajes='centro'">
   <param name="G_01" value="espacio='E2' tipo='macro' fondo='sí' expresión='macros/borde.txt' nombre='bMapa' info='borde del panel del mapa'">
   <param name="G_02" value="espacio='E2' tipo='macro' fondo='sí' expresión='macros/borde.txt' nombre='bInst' info='borde del panel de instrucciones'">
   <param name="G_03" value="espacio='E2' tipo='punto' dibujar-si='0' expresión='(_SEPARADOR_,_SEPARADOR_)' fijo='sí' info='(_SEPARADOR_)'">
   <param name="G_04" value="espacio='E2' tipo='texto' fondo='sí' color='34495e' expresión='[60,16]' texto='[titulo]' fuente='SansSerif,BOLD,24' fijo='sí' info='Título'">
   <param name="G_05" value="espacio='INST' tipo='polígono' color='cc000000' dibujar-si='paso>=0' expresión='(posInst.x,-(posInst.y+(paso)*posInst.h))(posInst.x+posInst.w-(showScroll*32),-(posInst.y+(paso)*posInst.h))(posInst.x+posInst.w-(showScroll*32),-(posInst.y+(paso+1)*posInst.h))(posInst.x,-(posInst.y+(paso+1)*posInst.h))(posInst.x,-(posInst.y+(paso)*posInst.h))' relleno='f3ecf7' ancho='0' info='marco sobre instruccion'">
   <param name="G_06" value="espacio='INST' tipo='segmento' color='cc000000' dibujar-si='(paso>=0)' expresión='(posInst.x+1,-(posInst.y+(paso+1)*posInst.h-1))(posInst.x+posInst.w-1-(showScroll*32),-(posInst.y+(paso+1)*posInst.h-1))' fijo='sí' tamaño='0' ancho='2' info='borde inferior del marco sobre instruccion'">
   <param name="G_07" value="espacio='INST' tipo='imagen' expresión='(posInst.x+20,-12-(posInst.y+10+s*posInst.h),0.65,0.65)' familia='s' s.intervalo='[0,numInst-1]' s.pasos='numInst-1' archivo='Instrucciones[s,InstImage]'">
   <param name="G_08" value="espacio='INST' tipo='punto' color='34495e' expresión='(posInst.x+40,-21-(posInst.y+10+s*posInst.h))' familia='s' s.intervalo='[0,numInst-1]' s.pasos='numInst-1' texto='[Instrucciones[s,InstTxt]]' fuente='SansSerif,PLAIN,21' fijo='no' tamaño='0' info='instrucciones'">
   <param name="G_09" value="espacio='MAPA' tipo='segmento' color='d6d0c6' expresión='(Calles[s,X0],Calles[s,Y0])(Calles[s,X1],Calles[s,Y1])' familia='s' s.intervalo='[0,nCalles-1]' s.pasos='nCalles-1' fijo='sí' tamaño='0' ancho='callesSegW' info='calle borde'">
   <param name="G_10" value="espacio='MAPA' tipo='segmento' color='blanco' expresión='(Calles[s,X0],Calles[s,Y0])(Calles[s,X1],Calles[s,Y1])' familia='s' s.intervalo='[0,nCalles-1]' s.pasos='nCalles-1' fijo='sí' tamaño='0' ancho='callesSegW-2' info='calle'">
   <param name="G_11" value="espacio='MAPA' tipo='segmento' color='95a4a7' dibujar-si='s<=paso' expresión='(Instrucciones[s,InstX],Instrucciones[s,InstY])(Instrucciones[s+1,InstX],Instrucciones[s+1,InstY])' familia='s' s.intervalo='[0,numInst-1]' s.pasos='numInst-1' fijo='no' tamaño='0' ancho='callesSegW-4' info='camino'">
   <param name="G_12" value="espacio='MAPA' tipo='imagen' dibujar-si='(paso>=0)&&(paso<numInst-1)' expresión='(Instrucciones[paso+1,InstX],Instrucciones[paso+1,InstY],1,1)' archivo='images/cursor.png' rotini='Instrucciones[paso,InstRot]' info='cursor'">
   <param name="G_13" value="espacio='MAPA' tipo='imagen' expresión='(p0.x+desvP0.x,p0.y+desvP0.y,escLupe,escLupe)' archivo='images/casa_lupe.png' info='origen casa lupe'">
   <param name="G_14" value="espacio='MAPA' tipo='imagen' dibujar-si='respuestaCorrecta' expresión='(p1.x+desvP1.x,p1.y+desvP1.y,escJuan,escJuan)' archivo='images/casa_juan.png' info='destino casa juan'">
   <param name="G_15" value="espacio='MAPA' tipo='imagen' dibujar-si='!respuestaCorrecta' expresión='(p2.x+desvP2.x,p2.y+desvP2.y,escJuan,escJuan)' archivo='images/casa_juan.png' info='destino casa juan'">
   <param name="G_16" value="espacio='MAPA' tipo='imagen' coord_abs='sí' expresión='(posNomCalle(&squot;x&squot;,s),posNomCalle(&squot;y&squot;,s),0.8,0.8)' familia='s' s.intervalo='[0,nCalles-1]' s.pasos='nCalles-1' archivo='ImgCalles[s]' rotini='(verCond)*90'">
   <param name="G_17" value="espacio='E2' tipo='punto' dibujar-si='0' expresión='(_SEPARADOR_,_SEPARADOR_)' fijo='sí' info='(_SEPARADOR_)'">
   <param name="G_18" value="espacio='E2' tipo='texto' dibujar-si='0' expresión='[0,0]' texto='[0]' fijo='sí'">
   <param name="G_19" value="espacio='E2' tipo='imagen' dibujar-si='(!bien)&&(verificado)' coord_abs='sí' expresión='(bInst.x-8,E2._h-66)' archivo='images/icon_wrong.png' info='Retro mal '">
   <param name="G_20" value="espacio='E2' tipo='texto' color='e67e22' dibujar-si='(!bien)&&(respuestaCorrecta)&&(verificado)' expresión='[bInst.x+46-12,E2._h-65]' texto='Con estas instrucciones Lupe llega a casa de Juan.' fuente='SansSerif,BOLD,22' fijo='sí' ancho='290' info='si llega y respondio no'">
   <param name="G_21" value="espacio='E2' tipo='texto' color='e67e22' dibujar-si='(!bien)&&(!respuestaCorrecta)&&(verificado)' expresión='[bInst.x+46-12,E2._h-65]' texto='Con estas instrucciones no llegas a casa de Juan.' fuente='SansSerif,BOLD,21' fijo='sí' ancho='290' info='no llega y respondio si'">
   <param name="G_22" value="espacio='E2' tipo='imagen' dibujar-si='(bien)&&(verificado)' coord_abs='sí' expresión='(bInst.x-4,E2._h-66)' archivo='images/icon_ok.png' info='Retro bien (verificado)&&(bien)'">
   <param name="G_23" value="espacio='E2' tipo='texto' color='e67e22' dibujar-si='(bien)&&(respuestaCorrecta)&&(verificado)' expresión='[bInst.x+46-4,E2._h-65]' texto='Con estas instrucciones llegas a casa de Juan.' fuente='SansSerif,BOLD,22' fijo='sí' ancho='290' info='si llega y respondio si'">
   <param name="G_24" value="espacio='E2' tipo='texto' color='e67e22' dibujar-si='(bien)&&(!respuestaCorrecta)&&(verificado)' expresión='[bInst.x+46-4,E2._h-65]' texto='Con estas instrucciones no llegas a casa de Juan.' fuente='SansSerif,BOLD,22' fijo='sí' ancho='290' info='no llega y respondio no'">
   <param name="Animación" value="pausa='800' controles='no' auto='no' hacer='stepAnim=(stepAnim+1)%(numInst+6);;paso=((stepAnim-1)>=numInst)?numInst-1:stepAnim-1;paso=((!respuestaCorrecta)&&(paso==(numInst-1)))?numInst-2:paso;;escJuan=((stepAnim-1)>=numInst)?((escJuan==0.5)?1:0.5):0.5;escLupe=((stepAnim-1)>=numInst)?((escLupe==0.5)?1:0.5):0.5;;paso=(!anim)?-1:paso;stepAnim=(!anim)?0:stepAnim;escJuan=(!anim)?0.5:escJuan;escLupe=(!anim)?0.5:escLupe;;scroll.y=(paso<=0)?0:scroll.y;ajustaScroll()' mientras='anim'">
</ajs>

<script type="descartes/macro" id="macros/borde.txt">
tipo_de_macro=R2
Idioma=español
id='INICIO' algoritmo='sí' evaluar='una-sola-vez' hacer='w=200;h=100;x=150;y=150;A=0;R=1;G=1;V=1'
tipo='imagen' coord_abs='sí' expresión='(x,y,1,1)' archivo='macros/borde_ar_iz.png'
tipo='imagen' coord_abs='sí' expresión='(x+w/2,y,w-8,1)' archivo='macros/borde_ar_ce.png'
tipo='imagen' coord_abs='sí' expresión='(x+w,y,1,1)' archivo='macros/borde_ar_de.png'
tipo='imagen' coord_abs='sí' expresión='(x,y+h/2,1,h-8)' archivo='macros/borde_ce_iz.png'
tipo='imagen' coord_abs='sí' expresión='(x+w,y+h/2,1,h-8)' archivo='macros/borde_ce_de.png'
tipo='imagen' coord_abs='sí' expresión='(x,y+h+2,1,1)' archivo='macros/borde_ab_iz.png'
tipo='imagen' coord_abs='sí' expresión='(x+w/2,y+h+2,w-8,1)' archivo='macros/borde_ab_ce.png'
tipo='imagen' coord_abs='sí' expresión='(x+w,y+h+2,1,1)' archivo='macros/borde_ab_de.png'
tipo='polígono' coord_abs='sí' expresión='(x,y)(x+w,y)(x+w,y+h+2)(x,y+h+2)(x,y)' relleno='(R,G,V,A)' ancho='0'
tipo='segmento' color='c0000000' coord_abs='sí' expresión='(x+1,y+h+1)(x+w-1,y+h+1)' fijo='sí' tamaño='0' ancho='2'
</script>

</body>

</html>